/* @preserve built on: 2021-10-15T09:50:27.245Z */
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports,require("lodash"),require("mithril"),require("mithril/stream"),require("signature_pad")):typeof define==="function"&&define.amd?define(["exports","lodash","mithril","mithril/stream","signature_pad"],t):(e=typeof globalThis!=="undefined"?globalThis:e||self,t(e.uiWidgets={},e._,e.m,e.m.stream,e.SignaturePad))})(this,(function(e,t,a,n,s){"use strict";function l(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var i=l(t);var r=l(a);var d=l(n);var u=l(s);const c={layoutType:"floatLabel",imageMaxSize:1280,imageDispHeight:"16rem",thumbDispHeight:"6rem",addFileTxt:"Upload...",addFilesTxt:"Add file(s)...",remFileTtl:"Remove",openFileTxt:"Open file",showPassTxt:"Show Password",requiredLblPost:"",signOpts:[{label:"",value:"draw"},{label:"",value:"type"},{label:"",value:"stamp"}],signMaxSize:640,signHeightPct:25,signFont:"sans-serif",signDrawTxt:"Draw",signTypeTxt:"Type",signStampTxt:"Accept",stampTxt:"Accept",stampBtnClass:"",stampBtnContext:"default",stampSetTxt:"Accepted",applyTtl:"Apply",resetTtl:"Reset",cancelTtl:"Cancel",drawIcn:"fas fa-signature",typeIcn:"fas fa-keyboard",stampIcn:"fas fa-check",applyIcn:"fas fa-check",resetIcn:"fas fa-eraser",cancelIcn:"fas fa-times",checkIcn:"far fa-check-square",uncheckIcn:"far fa-square",toggleOnIcn:"fas fa-toggle-on",toggleOffIcn:"fas fa-toggle-off",showPassIcn:"fas fa-eye",hidePassIcn:"fas fa-eye-slash",uploadIcn:"fas fa-file-upload",downloadIcn:"fas fa-file-download",deleteIcn:"fas fa-trash-alt",cameraIcn:"fas fa-camera",imageIcn:"fas fa-image",emailIcn:"fas fa-envelope",telIcn:"fas fa-phone",linkIcn:"fas fa-link",wordDocIcn:"fas fa-file-word",videoFileIcn:"fas fa-file-video",pdfFileIcn:"fas fa-file-pdf",musicFileIcn:"fas fa-file-audio",excelFileIcn:"fas fa-file-excel",fileIcn:"fas fa-file",codeFileIcn:"fas fa-file-code"};const o=c;function f(e){i["default"].assign(c,e)}function p(){return{"max-height":o.imageDispHeight}}function h(){return{"max-height":o.thumbDispHeight}}const m={wrapper:"",label:"silver",inputWrapper:"ba br2 b--silver pa2 ma0 dark-gray",input:"dark-gray fw2",button:"pa2 bn br2",navButton:"dark-gray",textarea:"dark-gray fw2",radio:"dark-gray pa2 br2",radioChecked:"bg-light-blue",radioUnchecked:"o-60",fileInput:"dark-gray ba bw1 br3 b--dashed b--black-30",fileHover:"blue b--blue",displayLabel:"silver",displayValue:"dark-gray",requiredLabel:"",disabledWrapper:"o-40",invalidInputWrapper:""};const g=m;function y(e){i["default"].assign(m,e)}const b={default:"bg-light-blue dark-gray"};function v(e){i["default"].assign(b,e)}function x(e="default"){if(e&&e in b){return b[e]}else{return""}}function w({wrapper:e="",merge:t=true},a){return`${e} ${t?g.wrapper:""} ${a?g.disabledWrapper:""}`}function I({label:e="",merge:t=true},a){return`${e} ${t?g.label:""} ${a?g.requiredLabel:""}`}function k({inputWrapper:e="",merge:t=true},a){return`${e} ${t?g.inputWrapper:""} ${a?g.invalidInputWrapper:""}`}function $({input:e="",merge:t=true}){return`${e} ${t?g.input:""}`}function T(e,t,a){return`${$(e)} ${D(t,a)}`}function S({input:e="",merge:t=true}){return`${e} ${t?g.textarea:""}`}function C({input:e="",merge:t=true},a,n,s){return`${e} ${t?g.radio:""} ${a?g.radioChecked:g.radioUnchecked} ${D(n,s)}`}function P(e){return`${g.fileInput} ${e?g.fileHover:""}`}function D(e,t){return e||t?"":"pointer"}function q(e){return(e+256).toString(16).substr(1)}function F(){const e=new Uint8Array(16);const t=window.crypto;t.getRandomValues(e);return[q(e[0]),q(e[1]),q(e[2]),q(e[3]),"-",q(e[4]),q(e[5]),"-",q(e[6]),q(e[7]),"-",q(e[8]),q(e[9]),"-",q(e[10]),q(e[11]),q(e[12]),q(e[13]),q(e[14]),q(e[15])].join("")}function A(){return Math.max(window.devicePixelRatio,1)}function U(e,t){return t?`${e}${o.requiredLblPost}`:e}function O(e,t){return t?t:e}function M(e){return e?r["default"]("span.mr2.truncate",{title:e,class:g.displayLabel},e):null}function L(e,t,a,n){return a?r["default"]("label.mb1.db",{title:a,for:e,class:I(t,n)},U(a,n)):null}function H(e,t,a){return[e?r["default"]("i.fa-fw",{class:`${t?"mr2":""} ${e}`}):null,t,a?r["default"]("i.fa-fw",{class:`${t?"ml2":""} ${a}`}):null]}function B(e){return function({target:{value:t}}){e(t)}}function N(e){return function({target:{checked:t}}){e(t)}}function W(e){switch(e){case"day":return"dd";case"month":return"mm";case"year":return"yyyy"}}function z(e,t,a){const n=e.querySelector(`#${t}-${a}`);n.focus()}function R(e,t,a){switch(e){case"dd":return(isNaN(t)||t<=3)&&((isNaN(a)||t===3&&a<=1||t<3)&&!(t===0&&a===0));case"mm":return(isNaN(t)||t<=1)&&((isNaN(a)||t===1&&a<=2||t<1)&&!(t===0&&a===0));case"yyyy":return(isNaN(t)||t>=1&&t<3)&&(isNaN(a)||t===1&&a===9||t===2);case"yy":return isNaN(t)||t>=0}}function _(e,t,a){if(e!==t()){const n=e.querySelector("input");j(n,a,"Invalid Date");t(e)}}function j(e,t,a){t.map(t=>{const n=t?"":`${a}`;e.setCustomValidity(n)})}function V(e,t,a,n,s){const l=parseInt(t.getAttribute("maxlength"));if(n.length===l&&a){const t=s.querySelector(`#${e}-${a}`);t.focus()}}function Y(e,t,a,n,s){const l=n.querySelector(`#${e}-${t}`);if((s.key==="Backspace"||s.key==="Delete")&&a.length===0&&l){l.focus();s.preventDefault()}}function E(e,t,a,n,s,l){const i=n.querySelector(`#${t}-${a}`);const r=e()?e():"";const d=i.value;const u=/^\d*$/.test(d);const c=parseInt(d.charAt(0));const o=parseInt(d.charAt(1));const f=R(a,c,o);if(s.inputType==="deleteContentForward"||s.inputType==="deleteContentBackward"){e("");return}if((u||d==="")&&f&&d.length<=4){e(d)}else{e(r)}V(t,i,l,e(),n)}function Z(e){const t=e.lastIndexOf(".");if(t===-1){return[e,""]}else{return[e.substr(0,t),e.substr(t)]}}function G(e){const t=e.split(",");const a=t[0].indexOf("base64")>=0?atob(t[1]):unescape(t[1]);const n=t[0].split(":")[1].split(";")[0];const s=a.length;const l=new Uint8Array(s);for(let e=0;e<s;e++){l[e]=a.charCodeAt(e)}return new Blob([l],{type:n})}function J(e,t){const a=(new Date).valueOf();const n=e;n.name=t;n.lastModified=a;return e}function K(e,t,a){const n=J(G(e),t);return{guid:F(),name:n.name,path:"not_set",file:n,dataUrl:e,metadata:a}}function Q(e){const[,t]=Z(e.name);switch(t.toLowerCase()){case".doc":case".docx":case".dot":case".wbk":case".docm":case".dotx":case".dotm":case".docb":case".txt":return o.wordDocIcn;case".webm":case".mkv":case".flv":case".vob":case".ogv":case".drc":case".gifv":case".mng":case".avi":case".mts":case".m2ts":case".mov":case".qt":case".wmv":case".yuv":case".rm":case".rmvb":case".viv":case".asf":case".amv":case".mp4":case".m4p":case".m4v":case".mpg":case".mp2":case".mpeg":case".mpe":case".mpv":case".m2v":case".svi":case".3gp":case".mxf":case".roq":case".nsv":case".f4v":case".f4p":case".f4a":case".f4b":return o.videoFileIcn;case".pdf":return o.pdfFileIcn;case".pcm":case".wav":case".aiff":case".mp3":case".aac":case".ogg":case".wma":case".flac":case".alac":return o.musicFileIcn;case".xls":case".xlt":case".xlm":case".xlsx":case".xlsm":case".xltx":case".xltm":case".xlsb":case".xla":case".xlam":case".xll":case".xlw":return o.excelFileIcn;case".html":case".js":case".css":case".scss":case".java":return o.codeFileIcn;case".jpg":case".jpeg":case".png":case".tiff":case".gif":case".svg":case".webp":return o.imageIcn;default:return o.fileIcn}}function X(e){return e&&e.includes("image")}function ee(e){const t=Math.min(e.byteLength,64*1024);const a=new DataView(e,0,t);if(a.getUint16(0,false)!==65496){return-2}const n=a.byteLength;let s=2;while(s<n){const e=a.getUint16(s,false);s+=2;if(e===65505){s+=2;if(a.getUint32(s,false)!==1165519206){return-1}s+=6;const e=a.getUint16(s,false)===18761;s+=a.getUint32(s+4,e);const t=a.getUint16(s,e);s+=2;for(let n=0;n<t;n++){if(a.getUint16(s+n*12,e)===274){return a.getUint16(s+n*12+8,e)}}}else if((e&65280)!==65280){break}else{s+=a.getUint16(s,false)}}return-1}function te(e){return new Promise(t=>{const a=new FileReader;a.onload=()=>{t(a.result)};a.readAsArrayBuffer(e)})}function ae(e){return te(e).then(ee)}function ne(e,t,a,n){if(!n||n>8){return}switch(n){case 2:e.translate(t,0);e.scale(-1,1);return;case 3:e.translate(t,a);e.rotate(Math.PI);return;case 4:e.translate(0,a);e.scale(1,-1);return;case 5:e.rotate(.5*Math.PI);e.scale(1,-1);return;case 6:e.rotate(.5*Math.PI);e.translate(0,-a);return;case 7:e.rotate(.5*Math.PI);e.translate(t,-a);e.scale(-1,1);return;case 8:e.rotate(-.5*Math.PI);e.translate(-t,0);return}}function se(e,t,a){if(e>t){if(e>a){return[a,Math.round(t*a/e)]}}else if(t>a){return[Math.round(e*a/t),a]}return[e,t]}function le(e,t,a){if(!e.type.match(/image.*/)){return Promise.reject(new Error("File must be an image"))}return ae(e).then(n=>new Promise(s=>{const l=new Image;l.onload=()=>{const e=document.createElement("canvas");const[i,r]=se(l.width,l.height,t);if(n>4){e.width=r;e.height=i}else{e.width=i;e.height=r}const d=e.getContext("2d");ne(d,i,r,n);d.drawImage(l,0,0,i,r);s(e.toDataURL(a))};const i=new FileReader;i.onload=()=>l.src=i.result;i.readAsDataURL(e)}))}function ie(e,t){return new Promise(a=>{const n=new Image;n.onload=()=>{const e=document.createElement("canvas");const[s,l]=se(n.width,n.height,t);e.width=s;e.height=l;const i=e.getContext("2d");i.drawImage(n,0,0,s,l);a(e.toDataURL())};n.src=e})}function re(e,t,a,n){const s=document.createElement("canvas");s.width=t;s.height=a;const l=.56*s.height;const i=s.getContext("2d");i.textBaseline="middle";i.font=`${l}px ${n}`;i.fillText(e,s.height*.05,l);return s.toDataURL()}function de(e,t){const a=o.signMaxSize;const n=.01*t*a;return re(e,a,n,o.signFont)}class ue{view({attrs:{label:e,classes:t="bg-red"},children:a}){return r["default"](".relative.dib",[a,e?r["default"]("span.absolute.ph1.nt1.nr1.top-0.right-0.br-pill.tc.f5.white.o-80",{class:t,style:{minWidth:"0.65rem"}},e):null])}}class ce{view({attrs:{label:e,type:t="button",title:a=e,icon:n,rightIcon:s,context:l,classes:i="",disabled:d,style:u,onclick:c}}){return r["default"]("button.button-reset",{type:t,title:a,disabled:d,class:`${i} ${d?g.disabledWrapper:"pointer"} ${x(l)} ${g.button}`,style:u,onclick:c},H(n,e,s))}}class oe{view({attrs:{label:e,title:t=e,icon:a,rightIcon:n,href:s,rel:l,target:i,download:d,context:u,classes:c="",style:o}}){return r["default"]("a.link.flex.items-center",{href:s,rel:l,target:i,download:d,title:t,class:`${c} ${x(u)} ${g.button}`,style:o},H(a,e,n))}}class fe{view({attrs:{label:e,title:t=e,icon:a,rightIcon:n,classes:s="",disabled:l,style:i,onclick:d}}){return r["default"](".mh2.pa2.truncate",{title:t,disabled:l,class:`${s} ${l?g.disabledWrapper:"pointer"} ${g.navButton}`,style:i,onclick:d},H(a,e,n))}}class pe{view({attrs:{label:e,title:t=e,icon:a,rightIcon:n,href:s,rel:l,target:i,download:d,classes:u="",style:c}}){return r["default"]("a.link.mh2.pa2.truncate",{href:s,rel:l,target:i,download:d,title:t,class:`${u} ${g.navButton}`,style:c},H(a,e,n))}}class he{view({attrs:{field:{style:e},value:t}}){return r["default"](".pa2",{style:e},r["default"].trust(t()))}}class me{view({attrs:{field:e,value:t}}){const{label:a,uiClass:n={},style:s}=e;return r["default"](".pa2.flex.flex-wrap",{class:w(n),style:s},[M(a),r["default"]("span.ws-normal",{title:t(),class:g.displayValue},t())])}}class ge{formatter(e){return e?new Date(String(e)).toLocaleDateString():e}oninit({attrs:{value:e}}){this.formatted=e.map(this.formatter)}onremove(){this.formatted.end(true)}view({attrs:{field:e}}){return r["default"](me,{field:e,value:this.formatted})}}function ye(e,t){if(e==="email"){return{href:`mailto:${t}`,class:g.displayValue}}else if(e==="tel"){return{href:`tel:${t}`,class:g.displayValue}}else{return{href:t,target:"_blank",class:g.displayValue}}}const be={email:o.emailIcn,tel:o.telIcn};class ve{view({attrs:{field:e,value:t}}){const{label:a,type:n="url",uiClass:s={},style:l}=e;return r["default"](".pa2.flex.flex-wrap",{class:w(s),style:l},[M(a),r["default"]("a.link.dim.pointer.ws-normal",ye(n,t()),r["default"]("i.mr2",{class:be[n]||o.linkIcn}),t())])}}class xe{view({attrs:{field:e,value:t}}){const{options:a=[]}=e;const n=i["default"].find(a,i["default"].matches({value:t()||false}));return n?r["default"]("span.ml2",n.label):null}}class we{constructor(){this.onIcon="checkIcn";this.offIcon="uncheckIcn"}view({attrs:{field:e,value:t}}){const{label:a,uiClass:n={},style:s}=e;return r["default"](".pa2.flex.items-center",{class:w(n),style:s},[M(a),r["default"]("i",{class:`${g.displayValue} ${o[t()?this.onIcon:this.offIcon]}`}),r["default"](xe,{field:e,value:t})])}}class Ie extends we{constructor(){super(...arguments);this.onIcon="toggleOnIcn";this.offIcon="toggleOffIcn"}}function ke(e,t){if(e.required){return!t}return false}function $e(e,t){if(e.required){return t.length<1}return false}function Te(e){return t=>{t.preventDefault();if(t.dataTransfer){t.dataTransfer.dropEffect="copy"}if(e()){t.redraw=false}e(true)}}function Se(e){return t=>{t.preventDefault();e(false)}}function Ce(e,t){return a=>{a.preventDefault();e(false);if(a.dataTransfer){t(a.dataTransfer.files)}}}function Pe(e){return({target:{files:t}})=>e(t)}class De{oncreate({dom:e,attrs:{value:t}}){t.map(t=>{if(t.length===0){e.firstChild.value=""}})}view({attrs:{field:e,defaultAccept:t="*",multiple:a=true,dragging:n,onSet:s},children:l}){const{label:d,id:u,name:c=u,title:o=d,required:f,readonly:p,disabled:h,autofocus:m,accept:g=t,uiClass:y={}}=e;return r["default"]("label.db",i["default"].extend({for:u,title:o,class:D(h,p),"data-input-id":u},h||p?{}:{ondragover:Te(n),ondragleave:Se(n),ondrop:Ce(n,s)}),[r["default"]("input.clip[type=file].bg-transparent.bn.outline-0",{id:u,name:c,multiple:a,accept:g,required:f,autofocus:m,disabled:h||p,onchange:Pe(s)}),d?r["default"]("span.db.mb1",{class:I(y,f)},U(d,f)):null,l])}}function qe(e,t=false){return a=>{const n=t?[]:e();i["default"].each(a,e=>{n.push({guid:F(),name:e.name,path:"not_set",file:e})});e(n)}}function Fe(e,t){return a=>{a.preventDefault();const n=e();i["default"].remove(n,{guid:t});e(n)}}class Ae{constructor(){this.dragging=d["default"](false)}view({attrs:{field:e,value:t}}){const{disabled:a,uiClass:n={}}=e;return r["default"]("div",{class:w(n,a)},[r["default"](De,{field:e,dragging:this.dragging,onSet:qe(t),value:t},r["default"]("div",{class:k(n,$e(e,t()))},r["default"](".pa2",{class:P(this.dragging())},[r["default"]("i.mr2",{class:o.uploadIcn}),r["default"]("span",o.addFilesTxt)]))),r["default"](".flex.flex-column.mt1.nb1",i["default"].map(t(),e=>r["default"]("span.pa2.mv1.ba.b--black-20.hide-child.dim.pointer",[r["default"]("i.mr2",{class:o.downloadIcn}),e.name,r["default"]("i.child.fr",{title:`${o.remFileTtl} ${e.name}`,class:o.deleteIcn,onclick:Fe(t,e.guid)})])))])}}class Ue{view({children:e,attrs:t}){return r["default"](".relative.w-third.w-25-m.w-20-l.pa1.tc.hide-child",[t.src&&t.src!=="not_set"?r["default"]("img.contain",{src:t.src}):null,t.data&&t.data.file&&(t.src==="not_set"||!t.src)?r["default"]("div.contain.tc.br5.6rem",{class:`${Q(t.data)} fa-2x`,tooltip:t.data.file.type}):null,e])}}class Oe{view({attrs:e}){return r["default"]("i.pa1",{class:Q(e),title:o.openFileTxt,onclick:e.path!=="not_set"?()=>window.open(e.path,"_blank"):undefined})}}class Me{view({attrs:{displayType:e="thumbnail",value:t}}){return e==="thumbnail"?r["default"](".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1",i["default"].map(t(),e=>r["default"](Ue,{src:O(e.path,e.dataUrl),data:e,style:h()},r["default"](".absolute.top-0.right-0.child",r["default"](ce,{title:`Remove ${e.name}`,icon:o.deleteIcn,onclick:Fe(t,e.guid)}))))):r["default"](".pa2.flex.flex-column",i["default"].map(t(),e=>r["default"](".flex.items-center.pa1.ba.b--black-20",[r["default"]("i.pa1",{class:o.uploadIcn}),r["default"]("span.ma1.flex-auto",{title:e.name},e.name),r["default"](Oe,e),r["default"]("i.pa1.pointer.dim",{title:`Remove ${e.name}`,class:o.cancelIcn,onclick:Fe(t,e.guid)})])))}}class Le{view({attrs:{field:e,value:t}}){const{label:a,uiClass:n={},style:s}=e;const l=i["default"].find(e.options,{value:t()});const d=l?l.label||l.value:t();return r["default"](".pa2.flex.flex-wrap",{class:w(n),style:s},[M(a),r["default"]("span.ws-normal",{title:d,class:g.displayValue},d)])}}class He{view({attrs:{field:e,value:t}}){const{label:a,uiClass:n={},style:s}=e;return r["default"](".pa2.flex.flex-column",{class:w(n),style:s},[M(a),r["default"](".flex.flex-column.mt1.nb1",i["default"].map(t(),({name:e,path:t})=>r["default"]("a.pa2.mv1.link.ba.b--black-20.dim.dib.pointer[target=_blank]",{class:g.displayValue,href:t},r["default"]("i.mr2",{class:o.downloadIcn}),e)))])}}class Be{view({attrs:{field:e,value:t}}){const{label:a,uiClass:n={},style:s}=e;return r["default"](".pa2.flex.flex-column",{class:w(n),style:s},[M(a),r["default"](".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1",i["default"].map(t(),({name:e,path:t,dataUrl:a})=>r["default"](Ue,{title:e,src:O(t,a),style:h()})))])}}class Ne{view({attrs:{field:e,value:t}}){const{label:a,uiClass:n={},style:s}=e;const l=i["default"].head(t());return r["default"](".pa2.flex.flex-column",{class:w(n),style:s},[M(a),l?r["default"]("img.img.h-100.mt2.contain.self-center",{title:l.name,src:O(l.path,l.dataUrl),style:p()}):r["default"]("i.mt2",{class:`${g.displayValue} ${o.imageIcn}`})])}}function We(e,t){return(e.match(t)||[]).length}function ze(e){let t=0;if(e.length>=8){t=1;if(e.length>=24){t=t+1}if(We(e,/[A-Z]/g)>1&&We(e,/[a-z]/g)>2){t=t+1}if(We(e,/[\d]/g)>1){t=t+1}if(We(e,/[!"Â£%^@#$&*]/g)>0){t=t+1}}return t}function Re(e){switch(e){case 0:{return"Invalid"}case 1:{return"Very Weak"}case 2:{return"Weak"}case 3:{return"Average"}case 4:{return"Strong"}case 5:{return"Very Strong"}}return""}const _e=[{value:1,background:"bg-dark-red"},{value:2,background:"bg-orange"},{value:3,background:"bg-yellow"},{value:4,background:"bg-light-green"},{value:5,background:"bg-green"}];class je{oninit({attrs:{value:e}}){this.passwordScore=e.map(e=>ze(String(e)))}onremove(){this.passwordScore.end()}view({attrs:{field:e}}){const{label:t,style:a}=e;return r["default"](".flex.flex-column",{style:a},[M(t),r["default"](".flex.mt1",i["default"].map(_e,e=>r["default"](".h1.w-20",{class:this.passwordScore()>=e.value?e.background:"bg-transparent"}))),r["default"]("span.f5.truncate",Re(this.passwordScore()))])}}class Ve{view({attrs:{field:{label:e="",title:t=e,required:a}}}){return r["default"]("label.mb2",{title:t},U(e,a))}}class Ye{view({attrs:e,children:t}){const{field:a,value:n,xform:s=n}=e;const{label:l,id:i,type:d="text",required:u,disabled:c,uiClass:o={}}=a;return r["default"]("div",{class:d==="hidden"?"clip":w(o,c)},[L(i,o,l,u),r["default"]("fieldset",{class:k(o,ke(a,s()))},t)])}}const Ee="0.7em";const Ze="0.3s ease-in-out";class Ge{constructor(){this.focus=false;this.focusIn=()=>this.focus=true;this.focusOut=()=>this.focus=false;this.wrapperHeight=0}oncreate({dom:e}){this.inputWrapper=e.firstElementChild;this.calcHeight()}onupdate(){this.calcHeight()}calcHeight(){if(this.inputWrapper.clientHeight!==this.wrapperHeight){this.wrapperHeight=this.inputWrapper.clientHeight;r["default"].redraw()}}shouldFloat(e,t){return e==="floatAlways"||t||this.focus}labelTranslateY(){return`calc(${this.wrapperHeight*.5}px - 1.5ex)`}view({attrs:e,children:t}){const{field:a,value:n,xform:s=n}=e;const{label:l,id:i,type:d="text",placeholder:u,required:c,disabled:f,layout:p=o.layoutType,uiClass:h={}}=a;const m=this.shouldFloat(p,u||n());return r["default"]("div",{class:d==="hidden"?"clip":w(h,f),style:l?{paddingTop:"0.5rem"}:{},onfocusin:this.focusIn,onfocusout:this.focusOut},r["default"]("fieldset.relative.pa0.ma0",{class:k(h,ke(a,s()))},[l&&this.wrapperHeight?[r["default"]("legend.db",{class:I(h,c),style:{visibility:"hidden",height:"0.5ch",transition:`max-width ${Ze}`,maxWidth:m?"100%":"0.01px"}},r["default"]("span",{style:{fontSize:Ee}},U(l,c))),r["default"](".absolute.top-0",{class:I(h,c),style:{transition:`transform ${Ze}`,transform:`translateY(${m?"-1ch":this.labelTranslateY()})`}},r["default"]("label.db",{for:i,title:l,style:{transition:`font-size ${Ze}`,fontSize:m?Ee:"1em"}},U(l,c)))]:null,t]))}}class Je{constructor(){this.layout=Ge}view({attrs:e,children:t}){const{field:{layout:a=o.layoutType}}=e;return r["default"](a==="default"?Ye:this.layout,e,t)}}class Ke extends Ge{shouldFloat(){return true}}class Qe extends Je{constructor(){super(...arguments);this.layout=Ke}}const Xe=new Set(["date","datetime-local","color","range"]);class et{view({attrs:e}){const{field:t,value:a,xform:n=a}=e;const{label:s,id:l,type:i="text",name:d=l,title:u=s,placeholder:c,max:o,maxlength:f,min:p,minlength:h,step:m,required:g,readonly:y,disabled:b,autofocus:v,autocomplete:x,pattern:w,inputmode:I,spellcheck:k,instant:T,uiClass:S={}}=t;const C=Xe.has(i)?Qe:Je;return r["default"](C,e,r["default"]("input.w-100.bg-transparent.bn.outline-0",{id:l,type:i,name:d,title:u,placeholder:c,max:o,maxlength:f,min:p,minlength:h,step:m,required:g,readonly:y,disabled:b,autofocus:v,autocomplete:x,pattern:w,inputmode:I,spellcheck:k,class:$(S),value:n(),[T?"oninput":"onchange"]:B(a)}))}}class tt{view({attrs:e}){const{field:t,value:a,xform:n=a}=e;const{label:s,id:l,name:d=l,title:u=s,placeholder:c,max:o,maxlength:f,min:p,minlength:h,step:m,required:g,readonly:y,disabled:b,autofocus:v,autocomplete:x,pattern:w,inputmode:I,spellcheck:k,instant:T,uiClass:S={},options:C}=t;const P=C&&C.length?C[0].value:"$";return r["default"](Qe,e,r["default"](".flex.flex-row.w-100",r["default"]("span.mr1.self-center",{class:$(S)},P),r["default"]("input.w-100.bg-transparent.bn.outline-0",{id:l,type:"text",name:d,title:u,placeholder:c,max:o,maxlength:f,min:p,minlength:h,step:m,required:g,readonly:y,disabled:b,autofocus:v,autocomplete:x,pattern:w,inputmode:I,spellcheck:k,class:$(S),value:i["default"].isUndefined(n())?null:st(at(n())),[T?"oninput":"onchange"]:it(a)})))}}function at(e){return i["default"].isString(e)?i["default"].parseInt(e):Number(e)}function nt(e){const t=e.replace(/[^\d.]/g,"");let a;let n=0;if(t.indexOf(".")>-1){const e=t.indexOf(".");const s=t.substring(0,e);a=i["default"].parseInt(i["default"].padStart(s,1,"0"));const l=t.substring(e+1,Math.min(e+3,t.length));n=i["default"].parseInt(i["default"].padEnd(l,2,"0"))}else{a=i["default"].parseInt(t)||0}return a*100+n}function st(e){const t=lt(e);if(t){return`${t[0]}.${t[1]}`}else{return t}}function lt(e){if(!i["default"].isFinite(e)){return undefined}const t=String(Math.abs(e));let a="0";let n="";if(t.length>2){const e=t.length-2;a=t.substring(0,e);n=t.substring(e)}else{n=i["default"].padStart(t,2,"0")}return[a,n]}function it(e){return({target:{value:t}})=>e(nt(t))}class rt{view({attrs:e}){const{id:t}=e.field;return r["default"]("input",{style:{display:"none"},id:t})}}class dt{constructor(){this.month=d["default"]();this.year=d["default"]();this.date=d["default"]();this.valid=this.date.map(Boolean);this.dom=d["default"]();this.focusedInput=d["default"]("mm")}buildDate(){this.date(`${this.month()}/${this.year()}`)}updateInputs(e){if(this.month()&&this.month().length===2&&this.year()&&this.year().length===2){this.buildDate();e(this.date())}else{this.date("");e("")}}oninit({attrs:{value:e}}){e.map(e=>{const[t,a=""]=String(e).split("/");if(t.length===2&&a.length===2){this.month(t);this.year(a);this.buildDate()}else if(!e&&this.date()){this.month("");this.year("");this.date("")}})}oncreate({dom:e}){_(e,this.dom,this.valid)}onupdate({dom:e}){_(e,this.dom,this.valid)}onremove(){this.date.end(true);this.year.end(true);this.month.end(true)}view({attrs:e}){const{field:t}=e;const{id:a,name:n=a,required:s,readonly:l,disabled:d,uiClass:u={}}=t;const c=$(u);return r["default"](Qe,e,r["default"](".flex",{onclick:()=>z(this.dom(),a,this.focusedInput())},r["default"]("span",[r["default"]("input.w-100.bg-transparent.bn.outline-0",{id:`${a}-mm`,name:`${n}-mm`,type:"text",placeholder:"MM",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:s,readonly:l,disabled:d,value:this.month(),class:c,style:{maxWidth:"calc(2.8ex + 4px)",textAlign:this.month()&&this.month().length===2?"center":"left",padding:"0px"},onfocus:i["default"].partial(this.focusedInput,"mm"),oninput:t=>{E(this.month,a,"mm",this.dom(),t,"yy");this.updateInputs(e.value)}})]),r["default"]("span",{style:{padding:"0px",marginRight:"2px"}},"/"),r["default"]("span",[r["default"]("input.w-100.bg-transparent.bn.outline-0",{id:`${a}-yy`,name:`${n}-yy`,type:"text",placeholder:"YY",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:s,readonly:l,disabled:d,value:this.year(),class:c,style:{maxWidth:"calc(2.7ex + 4px)",textAlign:this.year()&&this.year().length===2?"center":"left",padding:"0px"},onfocus:i["default"].partial(this.focusedInput,"yy"),onkeydown:e=>Y(a,"mm",this.year(),this.dom(),e),oninput:t=>{E(this.year,a,"yy",this.dom(),t);this.updateInputs(e.value)}}),r["default"](rt,e)])))}}class ut{constructor(){this.day=d["default"]("");this.month=d["default"]("");this.year=d["default"]("");this.date=d["default"]();this.valid=this.date.map(Boolean);this.dom=d["default"]();this.focusedInput=d["default"](undefined);this.locale=d["default"](undefined)}buildDate(){this.date(`${this.year()}-${this.month()}-${this.day()}`)}updateInputs(e){const t=parseInt(this.year());const a=parseInt(this.month())-1;const n=parseInt(this.day());const s=new Date(t,a,n);if(s.getFullYear()===t&&this.year().length===4&&s.getMonth()===a&&s.getDate()===n&&this.day().length===2&&this.month().length===2){this.buildDate();e(this.date())}else{this.date("");e("")}}findNextInput(e){const t=this.dateInputAdvanceOrder.indexOf(e);return t!==this.dateInputAdvanceOrder.length&&W(this.dateInputAdvanceOrder[this.dateInputAdvanceOrder.indexOf(e)+1])}findPrevInput(e){const t=this.dateInputAdvanceOrder.indexOf(e);return t!==0&&W(this.dateInputAdvanceOrder[this.dateInputAdvanceOrder.indexOf(e)-1])}setDateInputs(e){const t=new Intl.DateTimeFormat(e).formatToParts();this.dateParts=t;const a=t[0].type;const n=W(a);this.focusedInput(n);this.dateInputAdvanceOrder=i["default"](this.dateParts).map(({type:e})=>e).filter(e=>e!=="literal").value()}setLocale(e){const{options:t}=e;const a=t&&t.length?t[0].value:undefined;if(a!==this.locale()){this.locale(a)}}oninit({attrs:e}){e.value.map(e=>{const t=new Date(String(e));if(i["default"].isDate(t)&&!isNaN(t.getTime())){const e=i["default"].padStart(String(t.getDate()),2,"0");const a=i["default"].padStart(String(1+t.getMonth()),2,"0");const n=String(t.getFullYear());this.day(e);this.month(a);this.year(n);this.buildDate()}else if(!e&&this.date()){this.day("");this.month("");this.year("");this.date("")}});this.locale.map(e=>{this.setDateInputs(e)});this.setLocale(e.field)}oncreate({dom:e}){_(e,this.dom,this.valid)}onbeforeupdate({attrs:{field:e}}){this.setLocale(e)}onupdate({dom:e}){_(e,this.dom,this.valid)}onremove(){this.date.end(true);this.year.end(true);this.month.end(true);this.day.end(true)}view({attrs:e}){const{id:t,name:a=t,required:n,readonly:s,disabled:l,uiClass:d={}}=e.field;const u=$(d);const c=({type:d,value:c})=>{switch(d){case"literal":return r["default"]("span",{style:{padding:"0px",marginRight:"2px"}},c);case"day":return r["default"]("span",r["default"]("input.w-100.bg-transparent.bn.outline-0",{id:`${t}-dd`,name:`${a}-dd`,type:"text",placeholder:"DD",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:n,readonly:s,disabled:l,value:this.day(),class:u,onfocus:i["default"].partial(this.focusedInput,"dd"),onkeydown:e=>Y(t,this.findPrevInput("day"),this.day(),this.dom(),e),oninput:a=>{E(this.day,t,"dd",this.dom(),a,this.findNextInput("day"));this.updateInputs(e.value)},style:{maxWidth:"calc(2.3ex + 4px)",textAlign:this.day()&&this.day().length===2?"center":"left",padding:"0px"}}));case"month":return r["default"]("span",r["default"]("input.w-100.bg-transparent.bn.outline-0",{id:`${t}-mm`,name:`${a}-mm`,type:"text",placeholder:"MM",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:n,readonly:s,disabled:l,value:this.month(),class:u,onkeydown:e=>Y(t,this.findPrevInput("month"),this.month(),this.dom(),e),oninput:a=>{E(this.month,t,"mm",this.dom(),a,this.findNextInput("month"));this.updateInputs(e.value)},onfocus:i["default"].partial(this.focusedInput,"mm"),style:{maxWidth:"calc(2.8ex + 4px)",textAlign:this.month()&&this.month().length===2?"center":"left",padding:"0px"}}));case"year":return r["default"]("span",r["default"]("input.w-100.bg-transparent.bn.outline-0",{id:`${t}-yyyy`,name:`${a}-yyyy`,type:"text",placeholder:"YYYY",minlength:"4",maxlength:"4",pattern:"[0-9]*",inputmode:"numeric",required:n,readonly:s,disabled:l,value:this.year(),class:u,onfocus:i["default"].partial(this.focusedInput,"yyyy"),onkeydown:e=>Y(t,this.findPrevInput("year"),this.year(),this.dom(),e),oninput:a=>{E(this.year,t,"yyyy",this.dom(),a,this.findNextInput("year"));this.updateInputs(e.value)},style:{maxWidth:"calc(4.2ex + 4px)",textAlign:this.year()&&this.year().length===4?"center":"left",padding:"0px"}}))}};return r["default"](Qe,e,r["default"](".flex",{onclick:()=>z(this.dom(),t,this.focusedInput())},this.dateParts.map(e=>c(e)),r["default"](rt,e)))}}class ct{constructor(){this.showPassword=d["default"](false)}view({attrs:e}){const{field:t,value:a}=e;const{label:n,id:s,name:l=s,title:i=n,placeholder:d,maxlength:u,minlength:c,required:f,readonly:p,disabled:h,autofocus:m,autocomplete:g,pattern:y,inputmode:b,instant:v,uiClass:x={}}=t;return r["default"](Je,e,r["default"](".flex.flex-row",[r["default"]("input.w-100.bg-transparent.bn.outline-0",{id:s,name:l,title:i,placeholder:d,type:this.showPassword()?"text":"password",maxlength:u,minlength:c,required:f,readonly:p,disabled:h,autofocus:m,autocomplete:g,pattern:y,inputmode:b,class:$(x),value:a(),autocorrect:"off",[v?"oninput":"onchange"]:B(a)}),r["default"]("i.ml1.pa1.fa-fw.pointer.dim",{title:o.showPassTxt,class:this.showPassword()?o.hidePassIcn:o.showPassIcn,onclick:()=>this.showPassword(!this.showPassword())})]))}}class ot extends Ge{labelTranslateY(){return"0.5ex"}}class ft extends Je{constructor(){super(...arguments);this.layout=ot}}class pt{view({attrs:e}){const{label:t,id:a,name:n=a,title:s=t,placeholder:l,required:i,readonly:d,disabled:u,autofocus:c,autocomplete:o,spellcheck:f,instant:p,uiClass:h={}}=e.field;const{value:m}=e;return r["default"](ft,e,r["default"]("textarea.w-100.bg-transparent.bn.outline-0.h-100",{id:a,name:n,title:s,placeholder:l,required:i,readonly:d,disabled:u,autofocus:c,autocomplete:o,spellcheck:f,class:S(h),value:m(),style:{resize:"none"},[p?"oninput":"onchange"]:B(m)}))}}class ht{constructor(){this.onIcon="checkIcn";this.offIcon="uncheckIcn"}view({attrs:{field:e,value:t}}){const{label:a="",id:n,name:s=n,title:l=a,required:i,readonly:d,disabled:u,autocomplete:c,uiClass:f={}}=e;return r["default"]("div",{class:w(f,u)},r["default"]("fieldset",{class:k(f)},[r["default"]("label.flex.items-center",{title:l,class:T(f,u,d),"data-input-id":n},r["default"]("input.clip[type=checkbox]",{id:n,name:s,checked:t(),required:i,autocomplete:c,disabled:u||d,onchange:N(t)}),r["default"]("i.mr2",{class:o[t()?this.onIcon:this.offIcon]}),U(a,i),r["default"](xe,{field:e,value:t}))]))}}class mt extends ht{constructor(){super(...arguments);this.onIcon="toggleOnIcn";this.offIcon="toggleOffIcn"}}class gt{view({attrs:e}){const{field:t,value:a}=e;const{id:n,name:s=n,required:l,readonly:d,disabled:u,autocomplete:c,uiClass:o={},options:f}=t;return r["default"](Qe,e,r["default"](".w-100.flex",{onchange:B(a)},i["default"].map(f,({value:e,label:t=e,icon:i})=>{const f=a()===e;return r["default"]("label.dib",{title:t,class:C(o,f,u,d),"data-input-id":n},r["default"]("input.clip[type=radio]",{name:s,value:e,checked:f,required:l,autocomplete:c,disabled:u||d}),i?r["default"]("i.fa-fw",{class:i}):t)})))}}class yt{view({attrs:e}){const{field:t,value:a}=e;const{label:n,id:s,name:l=s,title:d=n,required:u,readonly:c,disabled:o,autofocus:f,autocomplete:p,uiClass:h={},options:m}=t;return r["default"](Je,e,r["default"]("select.w-100.bg-transparent.bn.outline-0",{id:s,name:l,title:d,required:u,readonly:c,disabled:o,autofocus:f,autocomplete:p,class:$(h),value:a(),onchange:B(a)},i["default"].map(m,({value:e,label:t=e})=>r["default"]("option",{value:e,disabled:o||c},t))))}}class bt{constructor(){this.dragging=d["default"](false)}view({attrs:{field:e,value:t,displayType:a}}){const n=i["default"].head(t());const{disabled:s,uiClass:l={}}=e;const d=a==="none"||!n?o.addFileTxt:n.name;return r["default"]("div",{class:w(l,s)},r["default"](De,{field:e,multiple:false,dragging:this.dragging,onSet:qe(t,true),value:t},r["default"]("div",{class:k(l,$e(e,t()))},r["default"](".flex.items-center.pa1",{class:P(this.dragging())},[r["default"]("i.pa1",{class:o.uploadIcn}),r["default"]("span.ma1.flex-auto",d),n&&a!=="none"?[r["default"](Oe,n),r["default"]("i.pa1.pointer.dim",{title:`Remove ${n.name}`,class:o.cancelIcn,onclick:Fe(t,n.guid)})]:null]))))}}function vt(e,t,a=false){return n=>{const s=a?[]:e();return Promise.all(i["default"].map(n,e=>le(e,t,e.type).then(t=>{const a=J(G(t),e.name);s.push({guid:F(),name:a.name,path:"not_set",file:a,dataUrl:t})}))).then(()=>{e(s);r["default"].redraw()})}}class xt{constructor(){this.dragging=d["default"](false)}view({attrs:{field:e,value:t}}){const{disabled:a,uiClass:n={}}=e;return r["default"]("div",{class:w(n,a)},[r["default"](De,{field:e,defaultAccept:"image/*",dragging:this.dragging,onSet:vt(t,o.imageMaxSize),value:t},r["default"]("div",{class:k(n,$e(e,t()))},r["default"](".w-100.pa1.dt.tc",{class:P(this.dragging())},r["default"]("i.fa-2x.dtc.v-mid",{class:o.cameraIcn})))),r["default"](".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1",i["default"].map(t(),e=>r["default"](Ue,{src:O(e.path,e.dataUrl),style:h()},r["default"](".absolute.top-0.right-0.child",r["default"](ce,{title:`Remove ${e.name}`,icon:o.deleteIcn,onclick:Fe(t,e.guid)})))))])}}class wt{constructor(){this.dragging=d["default"](false)}view({attrs:{field:e,value:t}}){const a=i["default"].head(t());const{disabled:n,uiClass:s={}}=e;return r["default"]("div",{class:w(s,n)},r["default"](De,{field:e,defaultAccept:"image/*",multiple:false,dragging:this.dragging,onSet:vt(t,o.imageMaxSize,true),value:t},r["default"]("div",{class:k(s,$e(e,t()))},r["default"](".pa1",{class:P(this.dragging())},r["default"](".relative.w-100.dt.tc",a?[r["default"]("img.img.contain",{title:a.name,src:O(a.path,a.dataUrl),style:p()}),r["default"](".absolute.top-0.right-0.pa1.pointer.dim",{title:`Remove ${a.name}`,onclick:Fe(t,a.guid)},r["default"]("i.pa1",{class:o.cancelIcn}))]:r["default"]("i.fa-2x.dtc.v-mid",{class:o.cameraIcn}))))))}}class It{oncreate({dom:e}){const t=e.children[0];const a=A();this.signaturePad=new u["default"](t,{minWidth:.5*a,maxWidth:1.5*a});const n=()=>{const e=A();t.width=t.offsetWidth*e;t.height=t.offsetHeight*e;const a=t.getContext("2d");a.scale(e,e);this.resetCanvas()};this.resizeHandler=i["default"].debounce(n,250);window.addEventListener("resize",this.resizeHandler);window.addEventListener("orientationchange",this.resizeHandler);n()}onremove(){this.resizeHandler.cancel();window.removeEventListener("resize",this.resizeHandler);window.removeEventListener("orientationchange",this.resizeHandler)}view({attrs:{style:e,onSet:t,onCancel:a}}){return[r["default"](".aspect-ratio.bg-white.ba.bw1.br3.b--dashed.b--black-30",{style:e},r["default"]("canvas.aspect-ratio--object")),r["default"](".absolute.top-0.right-0.z-999",{style:{transform:"translateY(-100%)"}},[r["default"](ce,{title:o.applyTtl,icon:o.applyIcn,classes:"ma1",onclick:()=>{if(!this.signaturePad.isEmpty()){t(this.signaturePad.toDataURL("image/png"))}}}),r["default"](ce,{title:o.resetTtl,icon:o.resetIcn,classes:"ma1",onclick:()=>this.resetCanvas()}),r["default"](ce,{title:o.cancelTtl,icon:o.cancelIcn,classes:"ma1",onclick:a})])]}resetCanvas(){this.signaturePad.clear()}}function kt(e,t,a){return()=>{if(e()){a(de(e(),t),{text:e(),heightPct:t})}return false}}class $t{constructor(){this.text=d["default"]("")}oncreate({dom:e}){const t=e.children[0];t.focus({preventScroll:false});this.scaleText(e)}onupdate({dom:e}){this.scaleText(e)}view({attrs:{heightPct:e,style:t,onSet:a,onCancel:n}}){return[r["default"]("form.aspect-ratio.ba.bw1.br3.b--dashed.b--black-30",{style:t,onsubmit:kt(this.text,e,a)},r["default"]("input.aspect-ratio--object.pa2.ba.bw0[type=text]",{oninput:B(this.text),value:this.text(),style:{"font-family":o.signFont}})),r["default"](".absolute.top-0.right-0.z-999",{style:{transform:"translateY(-100%)"}},[r["default"](ce,{title:o.applyTtl,icon:o.applyIcn,classes:"ma1",onclick:kt(this.text,e,a)}),r["default"](ce,{title:o.resetTtl,icon:o.resetIcn,classes:"ma1",onclick:()=>this.text("")}),r["default"](ce,{title:o.cancelTtl,icon:o.cancelIcn,classes:"ma1",onclick:n})])]}scaleText(e){const t=e.clientHeight;e.style.fontSize=`${.56*t}px`}}function Tt(e,t,a){return()=>a(de(t,e),{text:t,heightPct:e})}class St{view({attrs:{heightPct:e,stampTxt:t,stampSetTxt:a,onSet:n}}){return[r["default"]("span.clip",{style:{"font-family":o.signFont}},a),r["default"](".flex",r["default"](ce,{label:t,classes:`flex-auto ${o.stampBtnClass}`,context:o.stampBtnContext,onclick:Tt(e,a,n)}))]}}const Ct={["draw"]:It,["type"]:$t,["stamp"]:St};function Pt(e,t,a){return(n,s)=>ie(n,a).then(a=>{e([K(a,`sign-${t}.png`,s)]);r["default"].redraw()})}class Dt{oninit({attrs:{value:e}}){this.valUpdate=e.map(()=>this.setSignType())}onremove(){this.valUpdate.end()}view({attrs:{field:e,value:t}}){const{label:a,id:n,readonly:s,disabled:l,uiClass:d={},options:u=o.signOpts,heightPct:c=o.signHeightPct,stampTxt:f=o.stampTxt,stampSetTxt:p=o.stampSetTxt}=e;const h={paddingBottom:`${c}%`};const m=i["default"].head(t());const y=i["default"](u).map(({value:e})=>{if(e==="draw"){return{type:e,icon:o.drawIcn,label:o.signDrawTxt}}else if(e==="type"){return{type:e,icon:o.typeIcn,label:o.signTypeTxt}}else if(e==="stamp"){return{type:e,icon:o.stampIcn,label:o.signStampTxt}}return null}).compact().value();if(y.length===1&&!m){this.setSignType(y[0].type)}return r["default"]("div.relative",{class:w(d,l)},[L(n,d,a),r["default"]("div",{class:this.signType!=="stamp"?k(d,$e(e,t())):undefined},s||l?r["default"](".aspect-ratio",{id:n,style:h},m?r["default"](".aspect-ratio--object",{style:{"pointer-events":"none"}},r["default"]("img.img.w-100.absolute",{src:O(m.path,m.dataUrl)})):null):this.signType?r["default"](Ct[this.signType],{heightPct:c,stampTxt:f,stampSetTxt:p,style:h,onSet:Pt(t,n,o.signMaxSize),onCancel:i["default"].bind(this.setSignType,this,undefined)}):r["default"](".aspect-ratio.pointer",{id:n,class:g.fileInput,style:h},m?r["default"](".aspect-ratio--object.hide-child.dim",{onclick:i["default"].bind(t,this,[])},[r["default"]("img.img.w-100.absolute",{src:O(m.path,m.dataUrl)}),r["default"](".pa3.absolute.top-0.right-0.child",r["default"]("i.fa-2x",{class:o.resetIcn}))]):r["default"](".aspect-ratio--object.flex",i["default"].map(y,({type:e,icon:t,label:a})=>r["default"](".flex-auto.flex.items-center.justify-center.dim",{title:a,onclick:i["default"].bind(this.setSignType,this,e)},r["default"]("i.fa-2x.ma1",{class:t}),r["default"]("span.ma1.dn.db-ns.truncate",a))))))])}setSignType(e){this.signType=e}}function qt(e,t){return a=>{const n=t?[]:e();return Promise.all(i["default"].map(a,e=>{if(X(e.type)){return le(e,o.imageMaxSize,e.type).then(t=>{const a=J(G(t),e.name);n.push({guid:F(),name:a.name,path:"not_set",file:a,dataUrl:t})})}else{n.push({guid:F(),name:e.name,path:"not_set",file:e});return Promise.resolve()}})).then(()=>{e(n);r["default"].redraw()})}}class Ft{constructor(){this.dragging=d["default"](false)}view({attrs:{field:e,value:t}}){const a=i["default"].head(t());const{disabled:n,uiClass:s={}}=e;return r["default"]("div",{class:w(s,n)},r["default"](De,{field:e,defaultAccept:"*",multiple:false,dragging:this.dragging,onSet:qt(t,true),value:t},r["default"]("div",{class:k(s,$e(e,t()))},r["default"](".flex.items-center.pa1",{class:P(this.dragging())},a?a.dataUrl?[r["default"](".relative.w-100.dt.tc",r["default"]("img.img.contain",{title:a.name,src:O(a.path,a.dataUrl),style:p()}),r["default"](".absolute.top-0.right-0.pa1.pointer.dim",{title:`Remove ${a.name}`,onclick:Fe(t,a.guid)},r["default"]("i.pa1",{class:o.cancelIcn})))]:[r["default"](Oe,a),r["default"]("span.ma1.flex-auto",{title:a.name},a.name),r["default"]("i.pa1.pointer.dim",{title:`Remove ${a.name}`,class:o.cancelIcn,onclick:Fe(t,a.guid)})]:[r["default"]("i.pa1",{class:o.uploadIcn}),r["default"]("span.ma1.flex-auto",o.addFileTxt)]))))}}class At{constructor(){this.dragging=d["default"](false)}view({attrs:{field:e,value:t,displayType:a,showDisplay:n=true}}){const{disabled:s,uiClass:l={}}=e;return r["default"]("div",{class:w(l,s)},[r["default"](De,{field:e,defaultAccept:"*",dragging:this.dragging,onSet:qt(t,false),value:t},r["default"]("div",{class:k(l,$e(e,t()))},r["default"](".flex.items-center.pa1.dt",{class:P(this.dragging())},[r["default"]("i.pa1",{class:o.uploadIcn}),r["default"]("span.ma1.flex-auto",o.addFileTxt)]))),n?r["default"](Me,{displayType:a,value:t}):null])}}e.Badge=ue;e.BaseInput=et;e.BaseText=me;e.Button=ce;e.ButtonLink=oe;e.CardDateInput=dt;e.Checkbox=we;e.CheckboxInput=ht;e.CurrencyInput=tt;e.DateInput=ut;e.DateText=ge;e.DisplayTypeComponent=Me;e.FileList=He;e.FileMulti=Ae;e.FileSelect=bt;e.ImageList=Be;e.ImageMulti=xt;e.ImagePreview=Ne;e.ImageSelect=wt;e.Label=Ve;e.Link=ve;e.MultiOmniFileInput=At;e.NavButton=fe;e.NavLink=pe;e.OmniFileInput=Ft;e.PasswordInput=ct;e.PasswordStrength=je;e.RadioInput=gt;e.SelectInput=yt;e.SelectText=Le;e.SignBuilder=Dt;e.TextareaInput=pt;e.Toggle=Ie;e.ToggleInput=mt;e.Trusted=he;e.createStamp=de;e.currencyStrToNumber=nt;e.dataURItoBlob=G;e.dataUrlToFile=K;e.fileConstructor=J;e.fileNameExtSplit=Z;e.getOrientation=ee;e.guid=F;e.iconMap=be;e.linkAttrs=ye;e.numberToCurrencyStr=st;e.numberToCurrencyTuple=lt;e.pxRatio=A;e.readArrayBuffer=te;e.readOrientation=ae;e.resizeImage=le;e.scaleDataUrl=ie;e.scaleRect=se;e.textToImage=re;e.theme=g;e.updateButtonContext=v;e.updateClasses=y;e.updateConfig=f;Object.defineProperty(e,"__esModule",{value:true})}));
