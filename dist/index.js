/* @preserve built on: 2022-10-21T08:54:17.970Z */
import e from"lodash";import t from"mithril";import a from"mithril/stream";import{DateTime as n}from"luxon";import i from"flatpickr";import s from"signature_pad";const l={layoutType:"default",tooltipIcon:"fas fa-info",imageMaxSize:1280,addFileTxt:"Upload...",addFilesTxt:"Add file(s)...",remFileTtl:"Remove",openFileTxt:"Open file",showPassTxt:"Show Password",requiredLblPost:"",dateLocale:"default",datePickerIcn:"fas fa-calendar",signOpts:["draw","type","stamp"],signMaxSize:640,signHeightPct:25,signFont:"sans-serif",signDrawTxt:"Draw",signTypeTxt:"Type",signStampTxt:"Accept",stampTxt:"Accept",stampBtnClass:"",stampBtnContext:"default",stampSetTxt:"Accepted",applyTtl:"Apply",resetTtl:"Reset",cancelTtl:"Cancel",drawIcn:"fas fa-signature",typeIcn:"fas fa-keyboard",stampIcn:"fas fa-check",applyIcn:"fas fa-check",resetIcn:"fas fa-eraser",cancelIcn:"fas fa-times",badgePosition:"left",currencySymbol:"$",negativeStyle:"default",selectionLayout:["icon","label"],selectionOnLabel:"",selectionOffLabel:"",selectionOnActive:"",selectionOffActive:"",selectionOnInactive:"dn",selectionOffInactive:"dn",checkIcn:"far fa-check-square",uncheckIcn:"far fa-square",toggleOnIcn:"fas fa-toggle-on",toggleOffIcn:"fas fa-toggle-off",radioOnIcn:"fas fa-circle-dot",radioOffIcn:"fas fa-circle",showPassIcn:"fas fa-eye",hidePassIcn:"fas fa-eye-slash",uploadIcn:"fas fa-file-upload",downloadIcn:"fas fa-file-download",deleteIcn:"fas fa-trash-alt",cameraIcn:"fas fa-camera",imageIcn:"fas fa-image",emailIcn:"fas fa-envelope",telIcn:"fas fa-phone",linkIcn:"fas fa-link",wordDocIcn:"fas fa-file-word",videoFileIcn:"fas fa-file-video",pdfFileIcn:"fas fa-file-pdf",musicFileIcn:"fas fa-file-audio",excelFileIcn:"fas fa-file-excel",fileIcn:"fas fa-file",codeFileIcn:"fas fa-file-code"};const r=l;function c(t){e.assign(l,t)}function o(e,t){return t&&e in t?t[e]:r[e]}const d={wrapper:"",label:"silver",inputWrapper:"ba br2 b--silver pa2 ma0 dark-gray",input:"dark-gray fw2",button:"pa2 bn br2",navButton:"dark-gray",textarea:"dark-gray fw2",fileInputWrapper:"ba bw1 br3 b--black-30 b--dashed dark-gray",fileHover:"blue b--blue",displayLabel:"silver",displayValue:"dark-gray",requiredLabel:"",disabledWrapper:"o-40",invalidInputWrapper:"ba b--red",altLabel:"ml1 o-70",floatLabelPlaceholder:"",invalidCheckboxWrapper:"red",tooltipWrapper:"dib relative mh2",tooltipIconBackground:"bg-black h2 w2 relative br-100 ",tooltipIcon:"white f6",tooltipMessage:"white bg-black w4 f6 pa2 absolute br2 z-max",redNumber:"red fw2"};const u=d;function f(t){e.assign(d,t)}const h={default:"bg-light-blue dark-gray"};function p(t){e.assign(h,t)}function m(e="default"){if(e&&e in h){return h[e]}else{return""}}function g(t){return e.compact(t).join(" ")}function b({wrapper:e="",merge:t=true},a){return g([e,t?u.wrapper:"",a?u.disabledWrapper:""])}function v({label:e="",merge:t=true},a){return g([e,t?u.label:"",a?u.requiredLabel:""])}function y(e,t,a){return g([v(e,a),t?"f-07em cursor-default":`${u.floatLabelPlaceholder} cursor-text`])}function x({inputWrapper:e="",invalidInputWrapper:t="",merge:a=true},n){return g([e,a?u.inputWrapper:"",n?t:"",n&&a?u.invalidInputWrapper:""])}function w({input:e="",merge:t=true}){return g([e,t?u.input:""])}function I(e,t,a){return g([w(e),T(t,a)])}function k({input:e="",merge:t=true}){return g([e,t?u.textarea:""])}function $(e){return e?u.fileHover:""}function S({inputWrapper:e="",merge:t=true},a,n){return g([e,t?u.fileInputWrapper:"",n?u.invalidInputWrapper:"",$(a)])}function T(e,t){return e||t?"":"pointer"}function C(e){return(e+256).toString(16).substr(1)}function P(){const e=new Uint8Array(16);const t=window.crypto;t.getRandomValues(e);return[C(e[0]),C(e[1]),C(e[2]),C(e[3]),"-",C(e[4]),C(e[5]),"-",C(e[6]),C(e[7]),"-",C(e[8]),C(e[9]),"-",C(e[10]),C(e[11]),C(e[12]),C(e[13]),C(e[14]),C(e[15])].join("")}function q(){return Math.max(window.devicePixelRatio,1)}function D(e){return e&&(typeof e==="string"?e:e.text)}function O(e,t){const a=typeof e==="string"?e:e.text;return t?`${a}${r.requiredLblPost}`:a}function L({alt:e}){return e?t("span",{class:u.altLabel},e):null}function F(e,t){return t?t:e}function A(e,a,n,i){return t(a,n,[e.icon?t("i",{class:e.icon}):null,t("span",O(e,i)),L(e),e.rightIcon?t("i",{class:e.rightIcon}):null,e.href?t("a.link.dim.pointer.ws-normal.mh1",{onclick:e.onclick},[t("i",{class:r.linkIcn}),e.href]):null])}function U(e,a="mr2 truncate"){if(e){if(typeof e==="string"){return t("span",{title:e,class:g([a,u.displayLabel])},e)}else{return A(e,"span",{title:e.text,class:g([a,u.displayLabel])})}}return null}function M(e,a,n,i){if(n){if(typeof n==="string"){return t("label.mb1.db",{title:n,for:e,class:v(a,i)},O(n,i))}else{return A(n,"label.mb1.db",{title:n.text,for:e,class:v(a,i)},i)}}return null}function W(e){return[e.icon&&t("i.fa-fw",{class:e.icon}),e.text&&t("span",e.text),e.rightIcon&&t("i.fa-fw",{class:e.rightIcon})]}function E(e){return function({target:{value:t}}){e(t)}}function N(e,t){return t!=null?function({target:{checked:a}}){e(a?t:false)}:function({target:{checked:t}}){e(t)}}function B(e,t){if(e()!==t){e(t)}}function R({target:e}){e.select()}function H({key:e}){if(e==="Enter"&&document.activeElement){document.activeElement.click()}}function z(e){const t=e.lastIndexOf(".");if(t===-1){return[e,""]}else{return[e.substr(0,t),e.substr(t)]}}function j(e){const[t,a]=e.split(",");const n=t.indexOf("base64")>=0?atob(a):unescape(a);const i=t.substring(t.indexOf("data:")+5).split(";");const s=i[0];const l=n.length;const r=new Uint8Array(l);for(let e=0;e<l;e++){r[e]=n.charCodeAt(e)}return new Blob([r],{type:s})}function V(e,t){return new File([e],t,{type:e.type})}function Y(e,t,a){const n=V(j(e),t);return{guid:P(),name:n.name,path:"not_set",file:n,dataUrl:e,metadata:a}}function _(e){const[,t]=z(e.name);switch(t.toLowerCase()){case".doc":case".docx":case".dot":case".wbk":case".docm":case".dotx":case".dotm":case".docb":case".txt":return r.wordDocIcn;case".webm":case".mkv":case".flv":case".vob":case".ogv":case".drc":case".gifv":case".mng":case".avi":case".mts":case".m2ts":case".mov":case".qt":case".wmv":case".yuv":case".rm":case".rmvb":case".viv":case".asf":case".amv":case".mp4":case".m4p":case".m4v":case".mpg":case".mp2":case".mpeg":case".mpe":case".mpv":case".m2v":case".svi":case".3gp":case".mxf":case".roq":case".nsv":case".f4v":case".f4p":case".f4a":case".f4b":return r.videoFileIcn;case".pdf":return r.pdfFileIcn;case".pcm":case".wav":case".aiff":case".mp3":case".aac":case".ogg":case".wma":case".flac":case".alac":return r.musicFileIcn;case".xls":case".xlt":case".xlm":case".xlsx":case".xlsm":case".xltx":case".xltm":case".xlsb":case".xla":case".xlam":case".xll":case".xlw":return r.excelFileIcn;case".html":case".js":case".css":case".scss":case".java":return r.codeFileIcn;case".jpg":case".jpeg":case".png":case".tiff":case".gif":case".svg":case".webp":return r.imageIcn;default:return r.fileIcn}}function K(e){return e&&e.includes("image")}function Z(e){const t=Math.min(e.byteLength,64*1024);const a=new DataView(e,0,t);if(a.getUint16(0,false)!==65496){return-2}const n=a.byteLength;let i=2;while(i<n){const e=a.getUint16(i,false);i+=2;if(e===65505){i+=2;if(a.getUint32(i,false)!==1165519206){return-1}i+=6;const e=a.getUint16(i,false)===18761;i+=a.getUint32(i+4,e);const t=a.getUint16(i,e);i+=2;for(let n=0;n<t;n++){if(a.getUint16(i+n*12,e)===274){return a.getUint16(i+n*12+8,e)}}}else if((e&65280)!==65280){break}else{i+=a.getUint16(i,false)}}return-1}function G(e){return new Promise(t=>{const a=new FileReader;a.onload=()=>{t(a.result)};a.readAsArrayBuffer(e)})}function J(e){return G(e).then(Z)}function Q(e,t,a,n){if(!n||n>8){return}switch(n){case 2:e.translate(t,0);e.scale(-1,1);return;case 3:e.translate(t,a);e.rotate(Math.PI);return;case 4:e.translate(0,a);e.scale(1,-1);return;case 5:e.rotate(.5*Math.PI);e.scale(1,-1);return;case 6:e.rotate(.5*Math.PI);e.translate(0,-a);return;case 7:e.rotate(.5*Math.PI);e.translate(t,-a);e.scale(-1,1);return;case 8:e.rotate(-.5*Math.PI);e.translate(-t,0);return}}function X(e,t,a){if(e>t){if(e>a){return[a,Math.round(t*a/e)]}}else if(t>a){return[Math.round(e*a/t),a]}return[e,t]}function ee(e,t,a){if(!e.type.match(/image.*/)){return Promise.reject(new Error("File must be an image"))}return J(e).then(n=>new Promise(i=>{const s=new Image;s.onload=()=>{const e=document.createElement("canvas");const[l,r]=X(s.width,s.height,t);if(n>4){e.width=r;e.height=l}else{e.width=l;e.height=r}const c=e.getContext("2d");Q(c,l,r,n);c.drawImage(s,0,0,l,r);i(e.toDataURL(a))};const l=new FileReader;l.onload=()=>s.src=l.result;l.readAsDataURL(e)}))}function te(e,t){return new Promise(a=>{const n=new Image;n.onload=()=>{const e=document.createElement("canvas");const[i,s]=X(n.width,n.height,t);e.width=i;e.height=s;const l=e.getContext("2d");l.drawImage(n,0,0,i,s);a(e.toDataURL())};n.src=e})}function ae(e,t,a,n){const i=document.createElement("canvas");i.width=t;i.height=a;const s=.56*i.height;const l=i.getContext("2d");l.textBaseline="middle";l.font=`${s}px ${n}`;l.fillText(e,i.height*.05,s);return i.toDataURL()}function ne(e,t,a){const n=o("signMaxSize",a);const i=.01*t*n;return ae(e,n,i,o("signFont",a))}class ie{view({attrs:{label:e,classes:a="bg-red"},children:n}){return t(".relative.dib",[n,e?t("span.absolute.minw-65rem.ph1.nt1.nr1.top-0.right-0.br-pill.tc.f5.white.o-80",{class:a},e):null])}}class se{view({attrs:{label:e="",type:a="button",title:n=e,icon:i,rightIcon:s,context:l,classes:r="",style:c,disabled:o,onclick:d,tabindex:f}}){return t("button.button-reset",{type:a,title:n,disabled:o,class:`${r} ${o?u.disabledWrapper:"pointer"} ${m(l)} ${u.button}`,style:c,tabindex:f,onclick:d},W({text:e,icon:i,rightIcon:s}))}}class le{view({attrs:{label:e="",title:a=e,icon:n,rightIcon:i,href:s,rel:l,target:r,download:c,context:o,classes:d="",style:f}}){return t("a.link.flex.items-center",{href:s,rel:l,target:r,download:c,title:a,class:`${d} ${m(o)} ${u.button}`,style:f},W({text:e,icon:n,rightIcon:i}))}}class re{view({attrs:{label:e="",title:a=e,icon:n,rightIcon:i,classes:s="",style:l,disabled:r,onclick:c}}){return t(".mh2.pa2.truncate",{title:a,disabled:r,class:`${s} ${r?u.disabledWrapper:"pointer"} ${u.navButton}`,style:l,onclick:c},W({text:e,icon:n,rightIcon:i}))}}class ce{view({attrs:{label:e="",title:a=e,icon:n,rightIcon:i,href:s,rel:l,target:r,download:c,classes:o="",style:d}}){return t("a.link.mh2.pa2.truncate",{href:s,rel:l,target:r,download:c,title:a,class:`${o} ${u.navButton}`,style:d},W({text:e,icon:n,rightIcon:i}))}}function oe(e){switch(e){case"left":return{left:"initial",top:"initial",right:"calc(100% + 0.25rem)",bottom:"initial"};case"top":return{left:"initial",top:"initial",right:"initial",bottom:"calc(100% + 0.25rem)"};case"topRight":return{left:"calc(100%)",top:"initial",right:"initial",bottom:"calc(100%)"};case"topLeft":return{left:"initial",top:"initial",right:"calc(100%)",bottom:"calc(100%)"};case"bottom":return{left:"initial",top:"calc(100% + 0.25rem)",right:"initial",bottom:"initial"};case"bottomRight":return{left:"calc(100%)",top:"calc(100%)",right:"initial",bottom:"initial"};case"bottomLeft":return{left:"initial",top:"calc(100%)",right:"calc(100%)",bottom:"initial"};default:return{left:"calc(100% + 0.25rem)",top:"initial",right:"initial",bottom:"initial"}}}class de{constructor(){this.show=false}view({attrs:{message:e,direction:a="right",icon:n=r.tooltipIcon}}){return t("div",{class:u.tooltipWrapper},[t(".flex.items-center.justify-center",{class:u.tooltipIconBackground,onmouseenter:()=>this.show=true,onmouseleave:()=>this.show=false},[t("i",{class:g([n,u.tooltipIcon])}),t("span",{class:g([u.tooltipMessage,this.show?"db":"dn"]),style:oe(a)},e)])])}}class ue{view({attrs:{value:e}}){return t(".pa2",{},t.trust(e()))}}class fe{view({attrs:{field:e,value:a}}){const{label:n,uiClass:i={}}=e;return t(".pa2.flex.flex-wrap",{class:b(i)},[U(n),t("span.ws-normal",{title:a(),class:u.displayValue},a())])}}class he{formatter(e){return e?new Date(String(e)).toLocaleDateString():e}oninit({attrs:{value:e}}){this.formatted=e.map(this.formatter)}onremove(){this.formatted.end(true)}view({attrs:{field:e}}){return t(fe,{field:e,value:this.formatted})}}function pe(e,t){if(e==="email"){return{href:`mailto:${t}`,class:u.displayValue}}else if(e==="tel"){return{href:`tel:${t}`,class:u.displayValue}}else{return{href:t,target:"_blank",class:u.displayValue}}}const me={email:r.emailIcn,tel:r.telIcn};function ge(e,t){if(e==="email"){return o("emailIcn",t)}else if(e==="tel"){return o("telIcn",t)}else{return o("linkIcn",t)}}class be{view({attrs:{field:e,value:a}}){const{label:n,type:i="url",uiClass:s={},config:l}=e;return t(".pa2.flex.flex-wrap",{class:b(s)},[U(n),t("a.link.dim.pointer.ws-normal",pe(i,a()),t("i.mr2",{class:ge(i,l)}),a())])}}class ve{view({attrs:{selected:e,label:a,onIcon:n,offIcon:i,config:s}}){return t(".flex.items-center.nl1.nr1",o("selectionLayout",s).map(l=>{switch(l){case"label":return a;case"icon":return t("i.mh1",{class:e?n:i});case"on":return t("span.mh1",{class:o(e?"selectionOnActive":"selectionOnInactive",s)},o("selectionOnLabel",s));case"off":return t("span.mh1",{class:o(e?"selectionOffInactive":"selectionOffActive",s)},o("selectionOffLabel",s))}}))}}class ye{constructor(){this.onIcon="checkIcn";this.offIcon="uncheckIcn"}view({attrs:{field:e,value:a}}){const{label:n,uiClass:i={},config:s}=e;return t(".pa2",{class:b(i)},t(ve,{selected:Boolean(a()),label:U(n,"mh1 truncate"),onIcon:o(this.onIcon,s),offIcon:o(this.offIcon,s),config:s}))}}class xe extends ye{constructor(){super(...arguments);this.onIcon="toggleOnIcn";this.offIcon="toggleOffIcn"}}function we(e,t){if(!e.required&&!t||e.disabled){return false}if(e.required&&!t){return true}if(e.pattern!=null){if(ke(e.pattern,String(t)))return true}if(Ie(e,t))return true;return false}function Ie(e,t){let a=false;let n=false;if(e.min!=null){n=Number.parseInt(String(t))<e.min}if(e.max!=null){a=Number.parseInt(String(t))>e.max}if(e.minlength!=null){n=String(t).length<e.minlength}if(e.maxlength!=null){a=String(t).length>e.maxlength}return n||a}function ke(e,t){return!new RegExp(e).test(t)}function $e(e,t){if(e.required){return t.length<1}return false}function Se(e){return t=>{t.preventDefault();if(t.dataTransfer){t.dataTransfer.dropEffect="copy"}if(e()){t.redraw=false}e(true)}}function Te(e){return t=>{t.preventDefault();e(false)}}function Ce(e,t){return a=>{a.preventDefault();e(false);if(a.dataTransfer){t(a.dataTransfer.files)}}}function Pe(e){return({target:{files:t}})=>e(t)}class qe{constructor(){this.showLabel=true}oncreate({dom:e,attrs:{value:t}}){t.map(t=>{if(t.length===0){e.firstChild.value=""}})}view({attrs:{field:a,defaultAccept:n="*",multiple:i=true,dragging:s,onSet:l},children:r}){const{label:c,id:o,name:d=o,title:u=D(c),required:f,readonly:h,disabled:p,autofocus:m,tabindex:g="0",accept:b=n,uiClass:v={}}=a;const y=this.showLabel&&c?M(o,v,c,f):null;return t("label.db",e.extend({for:o,title:u,"aria-labelled-by":o,class:T(p,h),"data-input-id":o,tabindex:g,onkeydown:e=>{var t;if(e.key===" "){((t=document.activeElement)===null||t===void 0?void 0:t.firstElementChild).click()}}},p||h?{}:{ondragover:Se(s),ondragleave:Te(s),ondrop:Ce(s,l)}),[t("input.clip[type=file].bg-transparent.bn.outline-0",{id:o,name:d,multiple:i,accept:b,required:f,autofocus:m,disabled:p||h,tabindex:-1,onchange:Pe(l)}),y,r])}}function De(t,a=false){return n=>{const i=a?[]:t();e.each(n,e=>{i.push({guid:P(),name:e.name,path:"not_set",file:e})});t(i)}}function Oe(t,a){return n=>{n.preventDefault();const i=t();e.remove(i,{guid:a});t(i)}}class Le{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n}}){const{disabled:i,uiClass:s={},config:l,readonly:r}=a;return t("div",{class:b(s,i)},[t(qe,{field:a,dragging:this.dragging,onSet:De(n),value:n},t(".pa2",{class:S(s,this.dragging(),$e(a,n()))},[t("i.mr2",{class:o("uploadIcn",l)}),t("span",o("addFilesTxt",l))])),t(".flex.flex-column.mt1.nb1",e.map(n(),e=>t("span.pa2.mv1.ba.b--black-20.hide-child.dim.pointer",[t("i.mr2",{class:o("downloadIcn",l)}),e.name,!(r||i)&&t("i.child.fr",{title:`${o("remFileTtl",l)} ${e.name}`,class:o("deleteIcn",l),onclick:Oe(n,e.guid)})])))])}}class Fe{view({children:e,attrs:a}){return t(".relative.w-third.w-25-m.w-20-l.pa1.tc.hide-child",{tabindex:0,onkeydown:({key:e})=>{var t;if(e==="Enter"&&document.activeElement){(t=document.activeElement.querySelector("button"))===null||t===void 0?void 0:t.click()}}},[a.src&&a.src!=="not_set"?t("img.contain",{src:a.src}):null,a.data&&a.data.file&&(a.src==="not_set"||!a.src)?t("div.contain.tc.br5.6rem",{class:`${_(a.data)} fa-2x`,tooltip:a.data.file.type}):null,e])}}class Ae{view({attrs:e}){return t("i.pa1",{class:_(e),title:r.openFileTxt,onclick:e.path!=="not_set"?()=>window.open(e.path,"_blank"):undefined})}}class Ue{view({attrs:{displayType:a="thumbnail",value:n,readonlyOrDisabled:i,config:s}}){return a==="thumbnail"?t(".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1.max-h-thumb",e.map(n(),e=>t(Fe,{src:F(e.path,e.dataUrl),data:e},!i&&t(".absolute.top-0.right-0.child",t(se,{title:`Remove ${e.name}`,icon:o("deleteIcn",s),onclick:Oe(n,e.guid),tabindex:-1}))))):t(".pa2.flex.flex-column",e.map(n(),e=>t(".flex.items-center.pa1.ba.b--black-20",[t("i.pa1",{class:o("uploadIcn",s)}),t("span.ma1.flex-auto",{title:e.name},e.name),t(Ae,e),!i&&t("i.pa1.pointer.dim",{title:`Remove ${e.name}`,class:o("cancelIcn",s),onclick:Oe(n,e.guid)})])))}}class Me{view({attrs:{field:a,value:n}}){const{label:i,options:s,uiClass:l={}}=a;const r=e.find(s,{value:n()});const c=r?r.label||r.value:n();return t(".pa2.flex.flex-wrap",{class:b(l)},[U(i),t("span.ws-normal",{title:c,class:u.displayValue},c)])}}class We{view({attrs:{field:a,value:n}}){const{label:i,uiClass:s={},config:l}=a;return t(".pa2.flex.flex-column",{class:b(s)},[U(i),t(".flex.flex-column.mt1.nb1",e.map(n(),({name:e,path:a})=>t("a.pa2.mv1.link.ba.b--black-20.dim.dib.pointer[target=_blank]",{class:u.displayValue,href:a},t("i.mr2",{class:o("downloadIcn",l)}),e)))])}}class Ee{view({attrs:{field:a,value:n}}){const{label:i,uiClass:s={}}=a;return t(".pa2.flex.flex-column",{class:b(s)},[U(i),t(".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1.max-h-thumb",e.map(n(),({name:e,path:a,dataUrl:n})=>t(Fe,{title:e,src:F(a,n)})))])}}class Ne{view({attrs:{field:a,value:n}}){const{label:i,uiClass:s={},config:l}=a;const r=e.head(n());return t(".pa2.flex.flex-column",{class:b(s)},[U(i),r?t("img.img.h-100.max-h-img.mt2.contain.self-center",{title:r.name,src:F(r.path,r.dataUrl)}):t("i.mt2",{class:`${u.displayValue} ${o("imageIcn",l)}`})])}}function Be(e,t){return(e.match(t)||[]).length}function Re(e){let t=0;if(e.length>=8){t=1;if(e.length>=24){t=t+1}if(Be(e,/[A-Z]/g)>1&&Be(e,/[a-z]/g)>2){t=t+1}if(Be(e,/[\d]/g)>1){t=t+1}if(Be(e,/[!"Â£%^@#$&*]/g)>0){t=t+1}}return t}function He(e){switch(e){case 0:{return"Invalid"}case 1:{return"Very Weak"}case 2:{return"Weak"}case 3:{return"Average"}case 4:{return"Strong"}case 5:{return"Very Strong"}}return""}const ze=[{value:1,background:"bg-dark-red"},{value:2,background:"bg-orange"},{value:3,background:"bg-yellow"},{value:4,background:"bg-light-green"},{value:5,background:"bg-green"}];class je{oninit({attrs:{value:e}}){this.passwordScore=e.map(e=>Re(String(e)))}onremove(){this.passwordScore.end()}view({attrs:{field:a}}){const{label:n}=a;return t(".flex.flex-column",[U(n),t(".flex.mt1",e.map(ze,e=>t(".h1.w-20",{class:this.passwordScore()>=e.value?e.background:"bg-transparent"}))),t("span.f5.truncate",He(this.passwordScore()))])}}class Ve{view({attrs:{field:{label:e="",id:a,required:n,uiClass:i={}}}}){return t("div",{class:b(i)},M(a,i,e,n))}}class Ye{constructor(){this.invalid=false;this.selector="input"}onupdate({dom:e,attrs:{field:a,value:n}}){const i=e.querySelector(this.selector);const s=we(a,n())||(i?!i.checkValidity():false);if(s!==this.invalid){this.invalid=s;t.redraw()}}}class _e{view({attrs:e,children:a}){const{field:n,invalid:i}=e;const{label:s,id:l,type:r="text",required:c,disabled:o,uiClass:d={}}=n;return t("div",{class:r==="hidden"?"clip":b(d,o)},[M(l,d,s,c),t("fieldset.bn",{class:x(d,i)},a)])}}class Ke{constructor(){this.focus=false;this.focusIn=()=>{this.focus=true};this.focusOut=()=>{this.focus=false};this.wrapperHeight=0}oncreate({dom:e}){this.inputWrapper=e.firstElementChild;this.calcHeight()}onupdate(){this.calcHeight()}calcHeight(){if(this.inputWrapper.clientHeight!==this.wrapperHeight){this.wrapperHeight=this.inputWrapper.clientHeight;t.redraw()}}shouldFloat(e,t,a=false){return e==="floatAlways"||this.focus||Boolean(t)||a}labelTranslateY(){return`calc(${this.wrapperHeight*.5}px - 1.5ex)`}labelContent(e,t){return typeof e==="string"?O(e,t):[O(e,t),L(e)]}view({attrs:e,children:a}){const{field:n,invalid:i,value:s,xform:l=s}=e;const{label:r,id:c,type:d="text",placeholder:u,required:f,disabled:h,readonly:p,uiClass:m={},config:g,layout:w=o("layoutType",g)}=n;const I=this.shouldFloat(w,u||l()!=null&&String(l()),p);return t("div",{class:`${d==="hidden"?"clip":b(m,h)} ${r?"pt2":""}`,onfocusin:this.focusIn,onfocusout:this.focusOut},t("fieldset.relative.pa0.ma0.w-100",{class:x(m,i)},[r&&this.wrapperHeight?[t("legend.db.hidden.h-05ch.transition-mw",{class:`${v(m,f)} ${I?"mw-100":"mw-001px"}`},t("span.f-07em",this.labelContent(r,f))),t(".absolute.top-0.transition-transform",{style:{transform:`translateY(${I?"-1ch":this.labelTranslateY()})`}},t("label.db.transition-f",{for:c,title:typeof r==="string"?r:r.text,class:y(m,I,f)},this.labelContent(r,f)))]:null,a]))}}class Ze{constructor(){this.layout=Ke}view({attrs:e,children:a}){const{field:{config:n,layout:i=o("layoutType",n)}}=e;return t(i==="default"?_e:this.layout,e,a)}}class Ge extends Ke{shouldFloat(){return true}}class Je extends Ze{constructor(){super(...arguments);this.layout=Ge}}const Qe=new Set(["date","datetime-local","color","range"]);class Xe extends Ye{view({attrs:e}){const{field:a,value:n,xform:i=n}=e;const{label:s,id:l,type:r="text",name:c=l,title:o=D(s),placeholder:d,max:u,maxlength:f,min:h,minlength:p,step:m,required:g,readonly:b,disabled:v,autofocus:y,autocomplete:x,tabindex:I,pattern:k,inputmode:$,spellcheck:S,instant:T,uiClass:C={}}=a;const P=Qe.has(r)?Je:Ze;return t(P,{field:a,value:n,xform:i,invalid:this.invalid},t("input.w-100.bg-transparent.bn.outline-0",{id:l,type:r,name:c,title:o,placeholder:d,max:u,maxlength:f,min:h,minlength:p,step:m,required:g,readonly:b,disabled:v,autofocus:y,autocomplete:x,tabindex:I,pattern:k,inputmode:$,spellcheck:S,class:w(C),value:i(),[T?"oninput":"onchange"]:E(n)}))}}class et{view({attrs:a}){const{field:n,value:i,xform:s=i}=a;const{label:l,id:r,name:c=r,title:d=D(l),placeholder:f,max:h,maxlength:p,min:m,minlength:b,step:v,required:y,readonly:x,disabled:I,autofocus:k,autocomplete:$,tabindex:S,pattern:T,inputmode:C,spellcheck:P,uiClass:q={},config:O}=n;const L=o("currencySymbol",O);const F=o("negativeStyle",O);const A=o("badgePosition",O);const U=at(s());return t(Je,{field:n,value:i,invalid:we(n,i())},t(".flex.flex-row.w-100",[t("span.self-center",{class:g([A==="left"?"order-0 mr1":"order-last ml1",w(q)])},L),t("input.w-100.bg-transparent.bn.outline-0",{id:r,type:"text",name:c,title:d,placeholder:f,max:h,maxlength:p,min:m,minlength:b,step:v,required:y,readonly:x,disabled:I,autofocus:k,autocomplete:$,tabindex:S,pattern:T,inputmode:C,spellcheck:P,class:g([A==="right"?"tr":"",F.includes("red")&&U<0?u.redNumber:null,w(q)]),onfocus:R,value:e.isUndefined(s())?null:tt(U,F),onchange:lt(i)})]))}}function tt(e,t){const a=it(e);if(e<0){if(t.toLowerCase().includes("parentheses")){return`(${a})`}else if(t!=="red"){return`-${a}`}}return a}function at(t){return e.isString(t)?e.parseInt(t):Number(t)}function nt(t){const a=t.replace("(-","-").replace("(","-").replace(")","").replace(/[^\d.-]/g,"");let n;let i=0;if(a.indexOf(".")>-1){const t=a.indexOf(".");const s=a.substring(0,t);n=e.parseInt(e.padStart(s,1,"0"));const l=a.substring(t+1,Math.min(t+3,a.length));i=e.parseInt(e.padEnd(l,2,"0"))}else{n=e.parseInt(a)||0}return n*100+i}function it(e){const t=st(e);if(t){return`${t[0]}.${t[1]}`}else{return t}}function st(t){if(!e.isFinite(t)){return undefined}const a=String(Math.abs(t));let n="0";let i="";if(a.length>2){const e=a.length-2;n=a.substring(0,e);i=a.substring(e)}else{i=e.padStart(a,2,"0")}return[n,i]}function lt(e){return({target:{value:t}})=>e(nt(t))}class rt{view({attrs:e}){const{field:a,value:n,xform:i=n}=e;const{label:s,id:l,name:r=l,title:c=D(s),placeholder:d,max:u,maxlength:f,min:h,minlength:p,step:m,required:b,readonly:v,disabled:y,autofocus:x,autocomplete:I,tabindex:k,pattern:$,inputmode:S,spellcheck:T,instant:C,uiClass:P={},config:q}=a;const O=o("badgePosition",q);return t(Je,{field:a,value:n,invalid:we(a,n())},t(".flex.flex-row.w-100",[t("span.self-center",{class:g([O==="left"?"order-0 mr1":"order-last ml1",w(P)])},"%"),t("input.w-100.bg-transparent.bn.outline-0",{id:l,type:"number",name:r,title:c,placeholder:d,max:u,maxlength:f,min:h,minlength:p,step:m,required:b,readonly:v,disabled:y,autofocus:x,autocomplete:I,tabindex:k,pattern:$,inputmode:S,spellcheck:T,class:g([O==="right"?"tr":"",w(P)]),onfocus:R,value:i(),[C?"oninput":"onchange"]:E(n)})]))}}function ct(e){switch(e){case"day":return"dd";case"month":return"mm";case"year":return"yyyy"}}function ot(e,t,a){const n=e.querySelector(`#${t}-${a}`);n.focus()}function dt(e){const t=e?e.toLocaleLowerCase():"";if(t.includes("month")){return"mm"}else if(t.includes("day")){return"dd"}else if(t.includes("year")){return"yy"}else{return null}}function ut(e,t,a){const n=e.querySelector(`#${t}-${a}`);n.focus();n.select()}function ft(e){return parseInt(e.getAttribute("maxlength"))}function ht(e,t,a,n,i,s,{next:l,prev:r}){const c=n.querySelector(`#${e}-${t}`);const o=ft(c);if((i.key==="Backspace"||i.key==="Delete")&&a.length===0&&r){ut(n,e,r);i.preventDefault()}else if(s.charCodeAt(0)===i.key.charCodeAt(0)&&l&&a.length!==0&&a.length<o){ut(n,e,l);i.preventDefault()}}function pt(e,t,a,n,i,s){if(gt(a,n,i)&&e){s(t)}else{s("")}}function mt(e){const t=String(e());if(t.length===1&&t!=="0"){e(`0${t}`)}}function gt(e,t,a){const n=!a?2:4;return e.length===n&&t.length===2&&(!a||a.length===2)}function bt(e){if(e.includes("month")){return"month"}else if(e.includes("day")){return"day"}return"date"}function vt(e,t,a){if(e.invalidExplanation){if(a){return""}else{return`Please check the ${bt(e.invalidExplanation)}.`}}else if(!e.year||Number(t)<1900){return"Year must be greater than 1900."}return""}function yt(e,t,a){if(!a){if(!t&&!e){return""}else if(t.length!==2||Number(t)>12){return`Please check the month.`}else if(e.length!==2){return`Please check the year.`}}return""}function xt(e,t){if(t){const a=dt(e);t.querySelectorAll("input").forEach(t=>{if(a&&t.id.substr(-2)===a&&e){t.setCustomValidity(e)}else{t.setCustomValidity("")}})}}function wt(e,t,a,n){const i=t.length===2&&e.length===2&&Number(t)<=12&&Number(t)>0||!e&&!t&&!a;xt(yt(e,t,i),n);return i}function It(e,t,a,i,s){const l=n.fromObject({year:Number(e),month:Number(t),day:Number(a)});const r=!e&&!t&&!a;xt(vt(l,e,r),s);return l.isValid&&Number(e)>=1900||r&&!i}function kt(e,t,a,n,i){const s=n.querySelector(`#${t}-${a}`);const l=e()||"";const r=s.value;const c=/^\d*$/.test(r);if((c||r==="")&&r.length<=4){e(r)}else{e(l)}if(String(e()).length===ft(s)&&i){ut(n,t,i)}}class $t{view({attrs:e}){const{id:a}=e.field;return t("input.dn",{id:a})}}class St{constructor(){this.dom=a();this.valid=a();this.focusedInput=a("mm");this.month=a("");this.year=a("");this.date=a("")}buildDate(e,t){this.date(`${this.month()}/${this.year()}`);const a=wt(this.year(),this.month(),e,this.dom());pt(a,this.date(),this.year(),this.month(),"",t)}oninit({attrs:{value:e,field:t}}){this.valid(!t.required);e.map(e=>{if(e){this.date("");const[t,a]=String(e).split("/");this.month(t);this.year(a)}else if(!this.date()){this.month("");this.year("")}this.valid(wt(this.year(),this.month(),Boolean(t.required),this.dom()))})}oncreate({dom:e}){B(this.dom,e)}onupdate({dom:e}){B(this.dom,e)}onremove(){this.date.end(true);this.year.end(true);this.month.end(true)}view({attrs:a}){const{field:n,value:i}=a;const{id:s,name:l=s,required:r,readonly:c,disabled:o,tabindex:d,uiClass:u={}}=n;const f=w(u);return t(Je,{value:i,field:n,invalid:!this.valid()},t(".flex.ph-2px.pv-1px",{onclick:()=>ot(this.dom(),s,this.focusedInput())},t("span",[t("input.w-100.mw-mm.pa0.bg-transparent.bn.outline-0.tc",{id:`${s}-mm`,name:`${l}-mm`,type:"text",placeholder:"MM",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:r,readonly:c,disabled:o,tabindex:d,"aria-label":`${l}: Month`,value:this.month(),class:f,onfocus:e.partial(this.focusedInput,"mm"),oninput:()=>{kt(this.month,s,"mm",this.dom(),"yy");this.buildDate(Boolean(n.required),a.value)},onkeydown:e=>{ht(s,"mm",this.month(),this.dom(),e,"/",{next:"yy"})},onblur:()=>{mt(this.month);this.buildDate(Boolean(n.required),a.value)}})]),t("span.pa0.mr-2px","/"),t("span",[t("input.w-100.mw-yy.pa0.bg-transparent.bn.outline-0.tc",{id:`${s}-yy`,name:`${l}-yy`,type:"text",placeholder:"YY",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:r,readonly:c,disabled:o,tabindex:d,"aria-label":`${l}: Year`,value:this.year(),class:f,onfocus:e.partial(this.focusedInput,"yy"),onkeydown:e=>{ht(s,"yy",this.year(),this.dom(),e,"/",{prev:"mm"})},oninput:()=>{kt(this.year,s,"yy",this.dom());this.buildDate(Boolean(n.required),a.value)}}),t($t,a)])))}}function Tt(t){return[String(t.getFullYear()),e.padStart(String(1+t.getMonth()),2,"0"),e.padStart(String(t.getDate()),2,"0")]}class Ct{oncreate({dom:e,attrs:{field:{max:a,min:n},value:s}}){this.flatpickr=i(e,{position:"below right",disableMobile:true,minDate:n,maxDate:a,onChange:([e])=>{if(e){s(Tt(e).join("-"));t.redraw()}}});this.valueChange=s.map(e=>{const t=new Date(String(e));if(isNaN(t.valueOf())){this.flatpickr.clear()}else{this.flatpickr.setDate(t,false)}})}onremove(){this.flatpickr.destroy();this.valueChange.end(true)}view({attrs:{field:{config:e}}}){return t("i.ph-2px.pv-1px",{class:o("datePickerIcn",e)})}}class Pt{constructor(){this.dom=a();this.valid=a();this.focusedInput=a(undefined);this.locale=a(undefined);this.literalKey=a("/");this.day=a("");this.month=a("");this.year=a("");this.date=a()}buildDate(e,t=false){this.date(`${this.year()}-${this.month()}-${this.day()}`);const a=It(this.year(),this.month(),this.day(),t,this.dom());pt(a,this.date(),this.year(),this.month(),this.day(),e)}findNextInput(e){const t=this.dateInputAdvanceOrder.indexOf(e);return t!==this.dateInputAdvanceOrder.length&&ct(this.dateInputAdvanceOrder[this.dateInputAdvanceOrder.indexOf(e)+1])}findPrevInput(e){const t=this.dateInputAdvanceOrder.indexOf(e);return t!==0&&ct(this.dateInputAdvanceOrder[this.dateInputAdvanceOrder.indexOf(e)-1])}setDateInputs(t){const a=new Intl.DateTimeFormat(t).formatToParts();this.dateParts=a;const n=a[0].type;this.literalKey(a[1].value);const i=ct(n);this.focusedInput(i);this.dateInputAdvanceOrder=e(this.dateParts).map(({type:e})=>e).filter(e=>e!=="literal").value()}setLocale(e){const t=o("dateLocale",e);if(t!==this.locale()){this.locale(t)}}createDateInputs({type:a,value:n},{attrs:{field:{id:i,name:s=i,required:l,readonly:r,disabled:c,tabindex:o,uiClass:d={}},value:u}}){const f=w(d);switch(a){case"literal":return t("span.pa0.mr-2px",n);case"day":return t("span",t("input.w-100.mw-dd.pa0.bg-transparent.bn.outline-0.tc",{id:`${i}-dd`,name:`${s}-dd`,type:"text",placeholder:"DD",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:l,readonly:r,disabled:c,tabindex:o,value:this.day(),"aria-label":`${s}: Day`,class:`${f} maxw-dd p-0px`,onfocus:e.partial(this.focusedInput,"dd"),onkeydown:e=>{ht(i,"dd",this.day(),this.dom(),e,this.literalKey(),{next:this.findNextInput("day"),prev:this.findPrevInput("day")})},oninput:()=>{kt(this.day,i,"dd",this.dom(),this.findNextInput("day"));this.buildDate(u,l)},onblur:()=>{mt(this.day);this.buildDate(u,l)}}));case"month":return t("span",t("input.w-100.mw-mm.pa0.bg-transparent.bn.outline-0.tc",{id:`${i}-mm`,name:`${s}-mm`,type:"text",placeholder:"MM",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:l,readonly:r,disabled:c,tabindex:o,value:this.month(),"aria-label":`${s}: Month`,class:`${f} maxw-mm p-0px`,onkeydown:e=>{ht(i,"mm",this.month(),this.dom(),e,this.literalKey(),{next:this.findNextInput("month"),prev:this.findPrevInput("month")})},oninput:()=>{kt(this.month,i,"mm",this.dom(),this.findNextInput("month"));this.buildDate(u,l)},onfocus:e.partial(this.focusedInput,"mm"),onblur:()=>{mt(this.month);this.buildDate(u,l)}}));case"year":return t("span",t("input.w-100.mw-yyyy.pa0.bg-transparent.bn.outline-0.tc",{id:`${i}-yyyy`,name:`${s}-yyyy`,type:"text",placeholder:"YYYY",minlength:"4",maxlength:"4",pattern:"[0-9]*",inputmode:"numeric",required:l,readonly:r,disabled:c,tabindex:o,value:this.year(),"aria-label":`${s}: Year`,class:`${f} maxw-yyyy p-0px`,onfocus:e.partial(this.focusedInput,"yyyy"),onkeydown:e=>{ht(i,"yyyy",this.year(),this.dom(),e,this.literalKey(),{next:this.findNextInput("year"),prev:this.findPrevInput("year")})},oninput:()=>{kt(this.year,i,"yyyy",this.dom(),this.findNextInput("year"));this.buildDate(u,l)}}))}}resetDateParts(){this.day("");this.month("");this.year("")}oninit({attrs:{value:e,field:{required:t,config:a}}}){this.valid(!t);this.valueChange=e.map(e=>{if(e){const t=new Date(String(e));this.date("");if(isNaN(t.valueOf())){this.resetDateParts()}else{const[e,a,n]=Tt(t);this.day(n);this.month(a);this.year(e)}}else if(!this.date()){this.resetDateParts()}this.valid(It(this.year(),this.month(),this.day(),Boolean(t),this.dom()))});this.locale.map(e=>{this.setDateInputs(e)});this.setLocale(a)}oncreate({dom:e}){B(this.dom,e)}onbeforeupdate({attrs:{field:{required:e,config:t}}}){this.setLocale(t);this.valid(It(this.year(),this.month(),this.day(),Boolean(e),this.dom()))}onupdate({dom:e}){B(this.dom,e)}onremove(){this.valueChange.end(true);this.date.end(true);this.year.end(true);this.month.end(true);this.day.end(true);this.locale.end(true)}view(e){const{attrs:{field:a,value:n}}=e;const{id:i,disabled:s,readonly:l}=a;return t(Je,{value:n,field:a,invalid:!this.valid()},t(".flex",[t(".flex-auto.ph-2px.pv-1px",{onclick:()=>ot(this.dom(),i,this.focusedInput())},this.dateParts.map(t=>this.createDateInputs(t,e)),t($t,e.attrs)),!(s||l)&&t(Ct,{field:a,value:n})]))}}class qt{constructor(){this.showPassword=a(false)}view({attrs:e}){const{field:a,value:n}=e;const{label:i,id:s,name:l=s,title:r=D(i),placeholder:c,maxlength:d,minlength:u,required:f,readonly:h,disabled:p,autofocus:m,autocomplete:g,tabindex:b,pattern:v,inputmode:y,instant:x,uiClass:I={},config:k}=a;return t(Ze,{field:a,value:n,invalid:we(a,n())},t(".flex.flex-row.w-100",[t("input.w-100.bg-transparent.bn.outline-0",{id:s,name:l,title:r,placeholder:c,type:this.showPassword()?"text":"password",maxlength:d,minlength:u,required:f,readonly:h,disabled:p,autofocus:m,autocomplete:g,tabindex:b,pattern:v,inputmode:y,class:w(I),value:n(),autocorrect:"off",[x?"oninput":"onchange"]:E(n)}),t("i.ml1.pa1.fa-fw.pointer.dim",{title:o("showPassTxt",k),class:o(this.showPassword()?"hidePassIcn":"showPassIcn",k),onclick:()=>this.showPassword(!this.showPassword()),tabindex:0,onkeydown:H})]))}}class Dt extends Ke{labelTranslateY(){return"0.5ex"}}class Ot extends Ze{constructor(){super(...arguments);this.layout=Dt}}class Lt extends Ye{constructor(){super(...arguments);this.selector="textarea"}view({attrs:e}){const{field:a,value:n,xform:i=n}=e;const{label:s,id:l,name:r=l,title:c=D(s),placeholder:o,required:d,readonly:u,disabled:f,autofocus:h,autocomplete:p,minlength:m,maxlength:g,tabindex:b,spellcheck:v,instant:y,uiClass:x={}}=e.field;return t(Ot,{field:a,value:n,xform:i,invalid:this.invalid},t("textarea.w-100.bg-transparent.bn.outline-0.h-100.resize-none",{id:l,name:r,title:c,placeholder:o,required:d,readonly:u,disabled:f,autofocus:h,autocomplete:p,minlength:m,maxlength:g,tabindex:b,spellcheck:v,class:k(x),value:n(),[y?"oninput":"onchange"]:E(n)}))}}class Ft{constructor(){this.onIcon="checkIcn";this.offIcon="uncheckIcn"}view({attrs:{field:e,value:a}}){const{label:n,id:i,name:s=i,value:l,title:r=D(n),required:c,readonly:d,disabled:f,autocomplete:h,tabindex:p="0",uiClass:m={},config:v}=e;return t("div",{class:b(m,f)},t("fieldset.w-100.bn",{class:x(m)},[t("input.clip[type=checkbox]",{id:i,name:s,value:l,checked:a(),required:c,autocomplete:h,disabled:f||d,tabindex:-1,"aria-hidden":"true",onchange:N(a,l)}),t("label.db",{class:g([I(m,f,d),c&&!a()?u.invalidCheckboxWrapper:""]),for:i,title:r,"data-input-id":i,"aria-label":n,tabindex:p,onkeydown:e=>{if(e.key===" "){a(!a())}}},t(ve,{selected:Boolean(a()),label:n?t("span.mh1",O(n,c)):null,onIcon:o(this.onIcon,v),offIcon:o(this.offIcon,v),config:v}))]))}}class At extends Ft{constructor(){super(...arguments);this.onIcon="toggleOnIcn";this.offIcon="toggleOffIcn"}}class Ut{view({attrs:e}){const{field:a,value:n}=e;const{label:i,id:s,name:l,value:r,title:c=D(i),required:d,readonly:u,disabled:f,autocomplete:h,tabindex:p="0",uiClass:m={},config:g}=a;const v=n()===r;return t("div",{class:b(m,f)},t("fieldset.w-100.bn",{class:x(m)},[t("input.clip[type=radio]",{id:s,name:l,value:r,checked:v,required:d,autocomplete:h,disabled:f||u,tabindex:-1,"aria-hidden":"true",onchange:E(n)}),t("label.db",{class:I(m,f,u),for:s,title:c,"data-input-id":s,"aria-label":i,tabindex:p,onkeydown:e=>{var t;if(e.key===" "){((t=document.activeElement)===null||t===void 0?void 0:t.firstElementChild).click()}}},t(ve,{selected:v,label:i?t("span.mh1",O(i,d)):null,onIcon:o("radioOnIcn",g),offIcon:o("radioOffIcn",g),config:g}))]))}}class Mt{view({attrs:a}){const{field:n,value:i}=a;const{label:s,id:l,name:r=l,title:c=s,required:o,readonly:d,disabled:u,autofocus:f,autocomplete:h,tabindex:p,uiClass:m={},placeholder:g="--- Select one ---",options:b}=n;return t(Je,{field:n,value:i,invalid:we(n,i())},[s?null:t("legend.screenreader",{id:`${l}-legend`},"Select one"),t("select.w-100.bg-transparent.bn.outline-0",{id:l,name:r,title:c,required:o,autofocus:f,autocomplete:h,tabindex:p,disabled:u||d,class:w(m),value:i()?i():"",onchange:E(i),"aria-labelledby":`${l}-legend`},t("option",{disabled:true,value:""},g),e.map(b,({value:e,label:a=e})=>t("option",{value:e,disabled:u||d},a)))])}}class Wt{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n,displayType:i}}){const s=e.head(n());const{disabled:l,uiClass:r={},config:c,readonly:d}=a;const u=i==="none"||!s?o("addFileTxt",c):s.name;return t("div",{class:b(r,l)},t(qe,{field:a,multiple:false,dragging:this.dragging,onSet:De(n,true),value:n},t(".flex.items-center.pa1",{class:S(r,this.dragging(),$e(a,n()))},[t("i.pa1",{class:o("uploadIcn",c)}),t("span.ma1.flex-auto",u),s&&i!=="none"?[t(Ae,s),!(d||l)&&t("i.pa1.pointer.dim",{title:`Remove ${s.name}`,class:o("cancelIcn",c),onclick:Oe(n,s.guid)})]:null])))}}function Et(a,n,i=false){return s=>{const l=i?[]:a();return Promise.all(e.map(s,e=>ee(e,n,e.type).then(t=>{const a=V(j(t),e.name);l.push({guid:P(),name:a.name,path:"not_set",file:a,dataUrl:t})}))).then(()=>{a(l);t.redraw()})}}class Nt{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n}}){const{disabled:i,uiClass:s={},config:l,readonly:r}=a;return t("div",{class:b(s,i)},[t(qe,{field:a,defaultAccept:"image/*",dragging:this.dragging,onSet:Et(n,o("imageMaxSize",l)),value:n},t(".w-100.pa1.dt.tc",{class:S(s,this.dragging(),$e(a,n()))},t("i.fa-2x.dtc.v-mid",{class:o("cameraIcn",l)}))),t(".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1.max-h-thumb",e.map(n(),e=>t(Fe,{src:F(e.path,e.dataUrl)},!(r||i)&&t(".absolute.top-0.right-0.child",t(se,{title:`Remove ${e.name}`,icon:o("deleteIcn",l),onclick:Oe(n,e.guid)})))))])}}class Bt{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n}}){const i=e.head(n());const{disabled:s,uiClass:l={},config:r,readonly:c}=a;return t("div",{class:b(l,s)},t(qe,{field:a,defaultAccept:"image/*",multiple:false,dragging:this.dragging,onSet:Et(n,o("imageMaxSize",r),true),value:n},t(".pa1",{class:S(l,this.dragging(),$e(a,n()))},t(".relative.w-100.dt.tc",i?[t("img.img.contain.max-h-img",{title:i.name,src:F(i.path,i.dataUrl)}),!(c||s)&&t(".absolute.top-0.right-0.pa1.pointer.dim",{title:`Remove ${i.name}`,onclick:Oe(n,i.guid)},t("i.pa1",{class:o("cancelIcn",r)}))]:t("i.fa-2x.dtc.v-mid",{class:o("cameraIcn",r)})))))}}class Rt{oncreate({dom:t}){const a=t.children[0];const n=q();this.signaturePad=new s(a,{minWidth:.5*n,maxWidth:1.5*n});const i=()=>{const e=q();a.width=a.offsetWidth*e;a.height=a.offsetHeight*e;const t=a.getContext("2d");t.scale(e,e);this.resetCanvas()};this.resizeHandler=e.debounce(i,250);window.addEventListener("resize",this.resizeHandler);window.addEventListener("orientationchange",this.resizeHandler);i()}onremove(){this.resizeHandler.cancel();window.removeEventListener("resize",this.resizeHandler);window.removeEventListener("orientationchange",this.resizeHandler)}view({attrs:{style:e,config:a,onSet:n,onCancel:i}}){return[t(".aspect-ratio.bg-white.ba.bw1.br3.b--dashed.b--black-30",{style:e},t("canvas.aspect-ratio--object")),t(".absolute.top-0.right-0.z-999.translate-up-100",[t(se,{title:o("applyTtl",a),icon:o("applyIcn",a),classes:"ma1",onclick:()=>{if(!this.signaturePad.isEmpty()){n(this.signaturePad.toDataURL("image/png"))}}}),t(se,{title:o("resetTtl",a),icon:o("resetIcn",a),classes:"ma1",onclick:()=>this.resetCanvas()}),t(se,{title:o("cancelTtl",a),icon:o("cancelIcn",a),classes:"ma1",onclick:i})])]}resetCanvas(){this.signaturePad.clear()}}class Ht{constructor(){this.text=a("")}oncreate({dom:e}){const t=e.children[0];t.focus({preventScroll:false});this.scaleText(e)}onupdate({dom:e}){this.scaleText(e)}view({attrs:{heightPct:a,style:n,config:i,onSet:s,onCancel:l}}){const r=e.flow([e.partial(ne,this.text(),a,i),e.partialRight(s,{text:this.text(),heightPct:a}),e.stubFalse]);return[t("form.aspect-ratio.ba.bw1.br3.b--dashed.b--black-30",{style:n,onsubmit:r},t("input.aspect-ratio--object.pa2.ba.bw0[type=text]",{oninput:E(this.text),style:{fontFamily:o("signFont",i)},value:this.text()})),t(".absolute.top-0.right-0.z-999.translate-up-100",[t(se,{title:o("applyTtl",i),icon:o("applyIcn",i),classes:"ma1",onclick:r}),t(se,{title:o("resetTtl",i),icon:o("resetIcn",i),classes:"ma1",onclick:()=>this.text("")}),t(se,{title:o("cancelTtl",i),icon:o("cancelIcn",i),classes:"ma1",onclick:l})])]}scaleText(e){const t=e.clientHeight;e.style.fontSize=`${.56*t}px`}}class zt{view({attrs:{heightPct:a,stampTxt:n,stampSetTxt:i,config:s,onSet:l}}){return[t("span.clip",{style:{fontFamily:o("signFont",s)}},i),t(".flex",t(se,{label:n,classes:`flex-auto ${o("stampBtnClass",s)}`,context:o("stampBtnContext",s),onclick:e.flow([e.partial(ne,i,a,s),e.partialRight(l,{text:i,heightPct:a})])}))]}}const jt={["draw"]:Rt,["type"]:Ht,["stamp"]:zt};function Vt(e,a,n){return(i,s)=>te(i,n).then(n=>{e([Y(n,`sign-${a}.png`,s)]);t.redraw()})}class Yt{oninit({attrs:{value:e}}){this.valUpdate=e.map(()=>this.setSignType())}onremove(){this.valUpdate.end()}view({attrs:{field:a,value:n}}){const{label:i,id:s,readonly:l,disabled:r,tabindex:c="0",uiClass:d={},config:f,options:h,heightPct:p=o("signHeightPct",f),stampTxt:m=o("stampTxt",f),stampSetTxt:g=o("stampSetTxt",f)}=a;const v={paddingBottom:`${p}%`};const y=e.head(n());const x=h?e(h).map(({value:e})=>String(e)in jt?e:null).compact().value():o("signOpts",f);const w=e.map(x,e=>{switch(e){case"draw":return{type:e,icon:o("drawIcn",f),label:o("signDrawTxt",f)};case"type":return{type:e,icon:o("typeIcn",f),label:o("signTypeTxt",f)};case"stamp":return{type:e,icon:o("stampIcn",f),label:o("signStampTxt",f)}}});if(w.length===1&&!y){this.setSignType(w[0].type)}return t("div.relative",{class:b(d,r)},[M(s,d,i),l||r?t(".aspect-ratio",{id:s,style:v},y?t(".aspect-ratio--object",{class:"pe-none"},t("img.img.w-100.absolute",{src:F(y.path,y.dataUrl)})):null):this.signType?t(jt[this.signType],{heightPct:p,stampTxt:m,stampSetTxt:g,style:v,config:f,onSet:Vt(n,s,o("signMaxSize",f)),onCancel:e.bind(this.setSignType,this,undefined)}):t(".aspect-ratio.pointer",{id:s,class:u.fileInputWrapper,style:v},y?t(".aspect-ratio--object.dim",{onclick:e.bind(n,this,[])},[t("img.img.w-100.absolute",{src:F(y.path,y.dataUrl)}),t(".absolute.top-1.right-1",t("i.fa-2x",{class:o("resetIcn",f),tabindex:0,onkeydown:H}))]):t(".aspect-ratio--object.flex",e.map(w,({type:a,icon:n,label:i})=>t(".flex-auto.flex.items-center.justify-center.dim",{title:i,tabindex:c,onkeydown:H,onclick:e.bind(this.setSignType,this,a)},t("i.fa-2x.ma1",{class:n}),t("span.ma1.dn.db-ns.truncate",i)))))])}setSignType(e){this.signType=e}}function _t(a,n){return i=>{const s=n?[]:a();return Promise.all(e.map(i,e=>{if(K(e.type)){return ee(e,r.imageMaxSize,e.type).then(t=>{const a=V(j(t),e.name);s.push({guid:P(),name:a.name,path:"not_set",file:a,dataUrl:t})})}else{s.push({guid:P(),name:e.name,path:"not_set",file:e});return Promise.resolve()}})).then(()=>{a(s);t.redraw()})}}class Kt{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n}}){const i=e.head(n());const{disabled:s,uiClass:l={},config:r,readonly:c}=a;return t("div",{class:b(l,s)},t(qe,{field:a,defaultAccept:"*",multiple:false,dragging:this.dragging,onSet:_t(n,true),value:n},t(".flex.items-center.pa1",{class:S(l,this.dragging(),$e(a,n()))},i?i.dataUrl?[t(".relative.w-100.dt.tc",t("img.img.contain.max-h-img",{title:i.name,src:F(i.path,i.dataUrl)}),!(c||s)&&t(".absolute.top-0.right-0.pa1.pointer.dim",{title:`Remove ${i.name}`,onclick:Oe(n,i.guid)},t("i.pa1",{class:o("cancelIcn",r)})))]:[t(Ae,i),t("span.ma1.flex-auto",{title:i.name},i.name),!(c||s)&&t("i.pa1.pointer.dim",{title:`Remove ${i.name}`,class:o("cancelIcn",r),onclick:Oe(n,i.guid),onkeydown:H,tabindex:0})]:[t("i.pa1",{class:o("uploadIcn",r)}),t("span.ma1",o("addFileTxt",r))])))}}class Zt{constructor(){this.dragging=a(false)}view({attrs:{field:e,value:a,displayType:n,showDisplay:i=true}}){const{disabled:s,uiClass:l={},config:r,readonly:c}=e;return t("div",{class:b(l,s)},[t(qe,{field:e,defaultAccept:"*",dragging:this.dragging,onSet:_t(a,false),value:a},t(".flex.items-center.pa1.dt",{class:S(l,this.dragging(),$e(e,a()))},[t("i.pa1",{class:o("uploadIcn",r)}),t("span.ma1.flex-auto",o("addFileTxt",r))])),i?t(Ue,{displayType:n,value:a,readonlyOrDisabled:s||c,config:r}):null])}}class Gt extends qe{constructor(){super(...arguments);this.showLabel=false}}class Jt{constructor(){this.dragging=a(false)}view({attrs:{field:e,value:a}}){const{id:n,required:i,uiClass:s={},config:l,label:r={text:"Add File",icon:o("uploadIcn",l)}}=e;return[M(n,s,r,i),t("div",{class:`${S(s,this.dragging(),$e(e,a()))} ${m()} ${u.button}`},t(Gt,{field:e,multiple:false,dragging:this.dragging,onSet:De(a,true),value:a},t(".flex.items-center",typeof r==="string"?W({text:r,icon:o("uploadIcn",l)}):W(r))))]}}export{ie as Badge,Xe as BaseInput,fe as BaseText,se as Button,le as ButtonLink,St as CardDateInput,ye as Checkbox,Ft as CheckboxInput,et as CurrencyInput,Pt as DateInput,he as DateText,Ue as DisplayTypeComponent,Jt as FileButtonSelect,We as FileList,Le as FileMulti,Wt as FileSelect,Ee as ImageList,Nt as ImageMulti,Ne as ImagePreview,Bt as ImageSelect,Ve as Label,be as Link,Zt as MultiOmniFileInput,re as NavButton,ce as NavLink,Kt as OmniFileInput,qt as PasswordInput,je as PasswordStrength,rt as PercentageInput,Ut as RadioInput,Mt as SelectInput,Me as SelectText,Yt as SignBuilder,Lt as TextareaInput,xe as Toggle,At as ToggleInput,de as Tooltip,ue as Trusted,ne as createStamp,nt as currencyStrToNumber,j as dataURItoBlob,Y as dataUrlToFile,V as fileConstructor,z as fileNameExtSplit,Z as getOrientation,P as guid,me as iconMap,g as joinClasses,pe as linkAttrs,ge as linkIcon,it as numberToCurrencyStr,st as numberToCurrencyTuple,q as pxRatio,G as readArrayBuffer,J as readOrientation,ee as resizeImage,te as scaleDataUrl,X as scaleRect,ae as textToImage,u as theme,p as updateButtonContext,f as updateClasses,c as updateConfig};
