/* @preserve built on: 2021-11-19T11:41:41.430Z */
import e from"lodash";import t from"mithril";import a from"mithril/stream";import{DateTime as n}from"luxon";import s from"signature_pad";const i={layoutType:"default",imageMaxSize:1280,imageDispHeight:"16rem",thumbDispHeight:"6rem",addFileTxt:"Upload...",addFilesTxt:"Add file(s)...",remFileTtl:"Remove",openFileTxt:"Open file",showPassTxt:"Show Password",requiredLblPost:"",signOpts:[{label:"",value:"draw"},{label:"",value:"type"},{label:"",value:"stamp"}],signMaxSize:640,signHeightPct:25,signFont:"sans-serif",signDrawTxt:"Draw",signTypeTxt:"Type",signStampTxt:"Accept",stampTxt:"Accept",stampBtnClass:"",stampBtnContext:"default",stampSetTxt:"Accepted",applyTtl:"Apply",resetTtl:"Reset",cancelTtl:"Cancel",drawIcn:"fas fa-signature",typeIcn:"fas fa-keyboard",stampIcn:"fas fa-check",applyIcn:"fas fa-check",resetIcn:"fas fa-eraser",cancelIcn:"fas fa-times",checkIcn:"far fa-check-square",uncheckIcn:"far fa-square",toggleOnIcn:"fas fa-toggle-on",toggleOffIcn:"fas fa-toggle-off",showPassIcn:"fas fa-eye",hidePassIcn:"fas fa-eye-slash",uploadIcn:"fas fa-file-upload",downloadIcn:"fas fa-file-download",deleteIcn:"fas fa-trash-alt",cameraIcn:"fas fa-camera",imageIcn:"fas fa-image",emailIcn:"fas fa-envelope",telIcn:"fas fa-phone",linkIcn:"fas fa-link",wordDocIcn:"fas fa-file-word",videoFileIcn:"fas fa-file-video",pdfFileIcn:"fas fa-file-pdf",musicFileIcn:"fas fa-file-audio",excelFileIcn:"fas fa-file-excel",fileIcn:"fas fa-file",codeFileIcn:"fas fa-file-code"};const l=i;function r(t){e.assign(i,t)}const c={wrapper:"",label:"silver",inputWrapper:"ba br2 b--silver pa2 ma0 dark-gray",input:"dark-gray fw2",button:"pa2 bn br2",navButton:"dark-gray",textarea:"dark-gray fw2",radio:"dark-gray pa2 br2",radioChecked:"bg-light-blue",radioUnchecked:"o-60",fileInputWrapper:"ba bw1 br3 b--black-30 b--dashed dark-gray",fileHover:"blue b--blue",displayLabel:"silver",displayValue:"dark-gray",requiredLabel:"",disabledWrapper:"o-40",invalidInputWrapper:"ba b--red"};const o=c;function u(t){e.assign(c,t)}const d={default:"bg-light-blue dark-gray"};function p(t){e.assign(d,t)}function h(e="default"){if(e&&e in d){return d[e]}else{return""}}function f({wrapper:e="",merge:t=true},a){return`${e} ${t?o.wrapper:""} ${a?o.disabledWrapper:""}`}function m({label:e="",merge:t=true},a){return`${e} ${t?o.label:""} ${a?o.requiredLabel:""}`}function g({inputWrapper:e="",merge:t=true},a){return`${e} ${t?o.inputWrapper:""} ${a?o.invalidInputWrapper:""}`}function b({input:e="",merge:t=true}){return`${e} ${t?o.input:""}`}function v(e,t,a){return`${b(e)} ${$(t,a)}`}function y({input:e="",merge:t=true}){return`${e} ${t?o.textarea:""}`}function x({input:e="",merge:t=true},a,n,s){return`${e} ${t?o.radio:""} ${a?o.radioChecked:o.radioUnchecked} ${$(n,s)}`}function w(e){return`${e?o.fileHover:""}`}function I({inputWrapper:e="",merge:t=true},a,n){return`${e} ${t?o.fileInputWrapper:""} ${n?o.invalidInputWrapper:""} ${w(a)}`}function $(e,t){return e||t?"":"pointer"}function k(e){return(e+256).toString(16).substr(1)}function S(){const e=new Uint8Array(16);const t=window.crypto;t.getRandomValues(e);return[k(e[0]),k(e[1]),k(e[2]),k(e[3]),"-",k(e[4]),k(e[5]),"-",k(e[6]),k(e[7]),"-",k(e[8]),k(e[9]),"-",k(e[10]),k(e[11]),k(e[12]),k(e[13]),k(e[14]),k(e[15])].join("")}function T(){return Math.max(window.devicePixelRatio,1)}function C(e,t){return t?`${e}${l.requiredLblPost}`:e}function q(e,t){return t?t:e}function P(e){return e?t("span.mr2.truncate",{title:e,class:o.displayLabel},e):null}function D(e,a,n,s){return n?t("label.mb1.db",{title:n,for:e,class:m(a,s)},C(n,s)):null}function U(e,a,n){return[e?t("i.fa-fw",{class:`${a?"mr2":""} ${e}`}):null,a,n?t("i.fa-fw",{class:`${a?"ml2":""} ${n}`}):null]}function A(e){return function({target:{value:t}}){e(t)}}function F(e){return function({target:{checked:t}}){e(t)}}function O(e,t){if(e()!==t){e(t)}}function L(e){const t=e.lastIndexOf(".");if(t===-1){return[e,""]}else{return[e.substr(0,t),e.substr(t)]}}function z(e){const t=e.split(",");const a=t[0].indexOf("base64")>=0?atob(t[1]):unescape(t[1]);const n=t[0].split(":")[1].split(";")[0];const s=a.length;const i=new Uint8Array(s);for(let e=0;e<s;e++){i[e]=a.charCodeAt(e)}return new Blob([i],{type:n})}function H(e,t){const a=(new Date).valueOf();const n=e;n.name=t;n.lastModified=a;return e}function M(e,t,a){const n=H(z(e),t);return{guid:S(),name:n.name,path:"not_set",file:n,dataUrl:e,metadata:a}}function W(e){const[,t]=L(e.name);switch(t.toLowerCase()){case".doc":case".docx":case".dot":case".wbk":case".docm":case".dotx":case".dotm":case".docb":case".txt":return l.wordDocIcn;case".webm":case".mkv":case".flv":case".vob":case".ogv":case".drc":case".gifv":case".mng":case".avi":case".mts":case".m2ts":case".mov":case".qt":case".wmv":case".yuv":case".rm":case".rmvb":case".viv":case".asf":case".amv":case".mp4":case".m4p":case".m4v":case".mpg":case".mp2":case".mpeg":case".mpe":case".mpv":case".m2v":case".svi":case".3gp":case".mxf":case".roq":case".nsv":case".f4v":case".f4p":case".f4a":case".f4b":return l.videoFileIcn;case".pdf":return l.pdfFileIcn;case".pcm":case".wav":case".aiff":case".mp3":case".aac":case".ogg":case".wma":case".flac":case".alac":return l.musicFileIcn;case".xls":case".xlt":case".xlm":case".xlsx":case".xlsm":case".xltx":case".xltm":case".xlsb":case".xla":case".xlam":case".xll":case".xlw":return l.excelFileIcn;case".html":case".js":case".css":case".scss":case".java":return l.codeFileIcn;case".jpg":case".jpeg":case".png":case".tiff":case".gif":case".svg":case".webp":return l.imageIcn;default:return l.fileIcn}}function R(e){return e&&e.includes("image")}function N(e){const t=Math.min(e.byteLength,64*1024);const a=new DataView(e,0,t);if(a.getUint16(0,false)!==65496){return-2}const n=a.byteLength;let s=2;while(s<n){const e=a.getUint16(s,false);s+=2;if(e===65505){s+=2;if(a.getUint32(s,false)!==1165519206){return-1}s+=6;const e=a.getUint16(s,false)===18761;s+=a.getUint32(s+4,e);const t=a.getUint16(s,e);s+=2;for(let n=0;n<t;n++){if(a.getUint16(s+n*12,e)===274){return a.getUint16(s+n*12+8,e)}}}else if((e&65280)!==65280){break}else{s+=a.getUint16(s,false)}}return-1}function B(e){return new Promise(t=>{const a=new FileReader;a.onload=()=>{t(a.result)};a.readAsArrayBuffer(e)})}function V(e){return B(e).then(N)}function E(e,t,a,n){if(!n||n>8){return}switch(n){case 2:e.translate(t,0);e.scale(-1,1);return;case 3:e.translate(t,a);e.rotate(Math.PI);return;case 4:e.translate(0,a);e.scale(1,-1);return;case 5:e.rotate(.5*Math.PI);e.scale(1,-1);return;case 6:e.rotate(.5*Math.PI);e.translate(0,-a);return;case 7:e.rotate(.5*Math.PI);e.translate(t,-a);e.scale(-1,1);return;case 8:e.rotate(-.5*Math.PI);e.translate(-t,0);return}}function j(e,t,a){if(e>t){if(e>a){return[a,Math.round(t*a/e)]}}else if(t>a){return[Math.round(e*a/t),a]}return[e,t]}function Y(e,t,a){if(!e.type.match(/image.*/)){return Promise.reject(new Error("File must be an image"))}return V(e).then(n=>new Promise(s=>{const i=new Image;i.onload=()=>{const e=document.createElement("canvas");const[l,r]=j(i.width,i.height,t);if(n>4){e.width=r;e.height=l}else{e.width=l;e.height=r}const c=e.getContext("2d");E(c,l,r,n);c.drawImage(i,0,0,l,r);s(e.toDataURL(a))};const l=new FileReader;l.onload=()=>i.src=l.result;l.readAsDataURL(e)}))}function _(e,t){return new Promise(a=>{const n=new Image;n.onload=()=>{const e=document.createElement("canvas");const[s,i]=j(n.width,n.height,t);e.width=s;e.height=i;const l=e.getContext("2d");l.drawImage(n,0,0,s,i);a(e.toDataURL())};n.src=e})}function K(e,t,a,n){const s=document.createElement("canvas");s.width=t;s.height=a;const i=.56*s.height;const l=s.getContext("2d");l.textBaseline="middle";l.font=`${i}px ${n}`;l.fillText(e,s.height*.05,i);return s.toDataURL()}function Z(e,t){const a=l.signMaxSize;const n=.01*t*a;return K(e,a,n,l.signFont)}class G{view({attrs:{label:e,classes:a="bg-red"},children:n}){return t(".relative.dib",[n,e?t("span.absolute.ph1.nt1.nr1.top-0.right-0.br-pill.tc.f5.white.o-80",{class:`${a} minw-65rem`},e):null])}}class J{view({attrs:{label:e,type:a="button",title:n=e,icon:s,rightIcon:i,context:l,classes:r="",style:c,disabled:u,onclick:d}}){return t("button.button-reset",{type:a,title:n,disabled:u,class:`${r} ${u?o.disabledWrapper:"pointer"} ${h(l)} ${o.button}`,style:c,onclick:d},U(s,e,i))}}class Q{view({attrs:{label:e,title:a=e,icon:n,rightIcon:s,href:i,rel:l,target:r,download:c,context:u,classes:d="",style:p}}){return t("a.link.flex.items-center",{href:i,rel:l,target:r,download:c,title:a,class:`${d} ${h(u)} ${o.button}`,style:p},U(n,e,s))}}class X{view({attrs:{label:e,title:a=e,icon:n,rightIcon:s,classes:i="",style:l,disabled:r,onclick:c}}){return t(".mh2.pa2.truncate",{title:a,disabled:r,class:`${i} ${r?o.disabledWrapper:"pointer"} ${o.navButton}`,style:l,onclick:c},U(n,e,s))}}class ee{view({attrs:{label:e,title:a=e,icon:n,rightIcon:s,href:i,rel:l,target:r,download:c,classes:u="",style:d}}){return t("a.link.mh2.pa2.truncate",{href:i,rel:l,target:r,download:c,title:a,class:`${u} ${o.navButton}`,style:d},U(n,e,s))}}class te{view({attrs:{value:e}}){return t(".pa2",{},t.trust(e()))}}class ae{view({attrs:{field:e,value:a}}){const{label:n,uiClass:s={}}=e;return t(".pa2.flex.flex-wrap",{class:f(s)},[P(n),t("span.ws-normal",{title:a(),class:o.displayValue},a())])}}class ne{formatter(e){return e?new Date(String(e)).toLocaleDateString():e}oninit({attrs:{value:e}}){this.formatted=e.map(this.formatter)}onremove(){this.formatted.end(true)}view({attrs:{field:e}}){return t(ae,{field:e,value:this.formatted})}}function se(e,t){if(e==="email"){return{href:`mailto:${t}`,class:o.displayValue}}else if(e==="tel"){return{href:`tel:${t}`,class:o.displayValue}}else{return{href:t,target:"_blank",class:o.displayValue}}}const ie={email:l.emailIcn,tel:l.telIcn};class le{view({attrs:{field:e,value:a}}){const{label:n,type:s="url",uiClass:i={}}=e;return t(".pa2.flex.flex-wrap",{class:f(i)},[P(n),t("a.link.dim.pointer.ws-normal",se(s,a()),t("i.mr2",{class:ie[s]||l.linkIcn}),a())])}}class re{view({attrs:{field:a,value:n}}){const{options:s=[]}=a;const i=e.find(s,e.matches({value:n()||false}));return i?t("span.ml2",i.label):null}}class ce{constructor(){this.onIcon="checkIcn";this.offIcon="uncheckIcn"}view({attrs:{field:e,value:a}}){const{label:n,uiClass:s={}}=e;return t(".pa2.flex.items-center",{class:f(s)},[P(n),t("i",{class:`${o.displayValue} ${l[a()?this.onIcon:this.offIcon]}`}),t(re,{field:e,value:a})])}}class oe extends ce{constructor(){super(...arguments);this.onIcon="toggleOnIcn";this.offIcon="toggleOffIcn"}}function ue(e,t){if(e.required&&!t){return true}if(e.pattern!=null){if(pe(e.pattern,String(t)))return true}if(de(e,t))return true;return false}function de(e,t){let a=false;let n=false;if(e.min!=null){n=Number.parseInt(String(t))<e.min}if(e.max!=null){a=Number.parseInt(String(t))>e.max}if(e.minlength!=null){n=String(t).length<e.minlength}if(e.maxlength!=null){a=String(t).length>e.maxlength}return n||a}function pe(e,t){return!new RegExp(e).test(t)}function he(e,t){if(e.required){return t.length<1}return false}function fe(e){return t=>{t.preventDefault();if(t.dataTransfer){t.dataTransfer.dropEffect="copy"}if(e()){t.redraw=false}e(true)}}function me(e){return t=>{t.preventDefault();e(false)}}function ge(e,t){return a=>{a.preventDefault();e(false);if(a.dataTransfer){t(a.dataTransfer.files)}}}function be(e){return({target:{files:t}})=>e(t)}class ve{constructor(){this.showLabel=true}oncreate({dom:e,attrs:{value:t}}){t.map(t=>{if(t.length===0){e.firstChild.value=""}})}view({attrs:{field:a,defaultAccept:n="*",multiple:s=true,dragging:i,onSet:l},children:r}){const{label:c,id:o,name:u=o,title:d=c,required:p,readonly:h,disabled:f,autofocus:g,accept:b=n,uiClass:v={}}=a;return t("label.db",e.extend({for:o,title:d,class:$(f,h),"data-input-id":o},f||h?{}:{ondragover:fe(i),ondragleave:me(i),ondrop:ge(i,l)}),[t("input.clip[type=file].bg-transparent.bn.outline-0",{id:o,name:u,multiple:s,accept:b,required:p,autofocus:g,disabled:f||h,onchange:be(l)}),this.showLabel&&c?t("span.db.mb1",{class:m(v,p)},C(c,p)):null,r])}}function ye(t,a=false){return n=>{const s=a?[]:t();e.each(n,e=>{s.push({guid:S(),name:e.name,path:"not_set",file:e})});t(s)}}function xe(t,a){return n=>{n.preventDefault();const s=t();e.remove(s,{guid:a});t(s)}}class we{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n}}){const{disabled:s,uiClass:i={}}=a;return t("div",{class:f(i,s)},[t(ve,{field:a,dragging:this.dragging,onSet:ye(n),value:n},t(".pa2",{class:I(i,this.dragging(),he(a,n()))},[t("i.mr2",{class:l.uploadIcn}),t("span",l.addFilesTxt)])),t(".flex.flex-column.mt1.nb1",e.map(n(),e=>t("span.pa2.mv1.ba.b--black-20.hide-child.dim.pointer",[t("i.mr2",{class:l.downloadIcn}),e.name,t("i.child.fr",{title:`${l.remFileTtl} ${e.name}`,class:l.deleteIcn,onclick:xe(n,e.guid)})])))])}}class Ie{view({children:e,attrs:a}){return t(".relative.w-third.w-25-m.w-20-l.pa1.tc.hide-child",[a.src&&a.src!=="not_set"?t("img.contain",{src:a.src}):null,a.data&&a.data.file&&(a.src==="not_set"||!a.src)?t("div.contain.tc.br5.6rem",{class:`${W(a.data)} fa-2x`,tooltip:a.data.file.type}):null,e])}}class $e{view({attrs:e}){return t("i.pa1",{class:W(e),title:l.openFileTxt,onclick:e.path!=="not_set"?()=>window.open(e.path,"_blank"):undefined})}}class ke{view({attrs:{displayType:a="thumbnail",value:n}}){return a==="thumbnail"?t(".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1.thumb-max-size",e.map(n(),e=>t(Ie,{src:q(e.path,e.dataUrl),data:e},t(".absolute.top-0.right-0.child",t(J,{title:`Remove ${e.name}`,icon:l.deleteIcn,onclick:xe(n,e.guid)}))))):t(".pa2.flex.flex-column",e.map(n(),e=>t(".flex.items-center.pa1.ba.b--black-20",[t("i.pa1",{class:l.uploadIcn}),t("span.ma1.flex-auto",{title:e.name},e.name),t($e,e),t("i.pa1.pointer.dim",{title:`Remove ${e.name}`,class:l.cancelIcn,onclick:xe(n,e.guid)})])))}}class Se{view({attrs:{field:a,value:n}}){const{label:s,uiClass:i={}}=a;const l=e.find(a.options,{value:n()});const r=l?l.label||l.value:n();return t(".pa2.flex.flex-wrap",{class:f(i)},[P(s),t("span.ws-normal",{title:r,class:o.displayValue},r)])}}class Te{view({attrs:{field:a,value:n}}){const{label:s,uiClass:i={}}=a;return t(".pa2.flex.flex-column",{class:f(i)},[P(s),t(".flex.flex-column.mt1.nb1",e.map(n(),({name:e,path:a})=>t("a.pa2.mv1.link.ba.b--black-20.dim.dib.pointer[target=_blank]",{class:o.displayValue,href:a},t("i.mr2",{class:l.downloadIcn}),e)))])}}class Ce{view({attrs:{field:a,value:n}}){const{label:s,uiClass:i={}}=a;return t(".pa2.flex.flex-column",{class:f(i)},[P(s),t(".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1.thumb-max-size",e.map(n(),({name:e,path:a,dataUrl:n})=>t(Ie,{title:e,src:q(a,n)})))])}}class qe{view({attrs:{field:a,value:n}}){const{label:s,uiClass:i={}}=a;const r=e.head(n());return t(".pa2.flex.flex-column",{class:f(i)},[P(s),r?t(`img.img.h-100.mt2.contain.self-center.img-max-size`,{title:r.name,src:q(r.path,r.dataUrl)}):t("i.mt2",{class:`${o.displayValue} ${l.imageIcn}`})])}}function Pe(e,t){return(e.match(t)||[]).length}function De(e){let t=0;if(e.length>=8){t=1;if(e.length>=24){t=t+1}if(Pe(e,/[A-Z]/g)>1&&Pe(e,/[a-z]/g)>2){t=t+1}if(Pe(e,/[\d]/g)>1){t=t+1}if(Pe(e,/[!"£%^@#$&*]/g)>0){t=t+1}}return t}function Ue(e){switch(e){case 0:{return"Invalid"}case 1:{return"Very Weak"}case 2:{return"Weak"}case 3:{return"Average"}case 4:{return"Strong"}case 5:{return"Very Strong"}}return""}const Ae=[{value:1,background:"bg-dark-red"},{value:2,background:"bg-orange"},{value:3,background:"bg-yellow"},{value:4,background:"bg-light-green"},{value:5,background:"bg-green"}];class Fe{oninit({attrs:{value:e}}){this.passwordScore=e.map(e=>De(String(e)))}onremove(){this.passwordScore.end()}view({attrs:{field:a}}){const{label:n}=a;return t(".flex.flex-column",[P(n),t(".flex.mt1",e.map(Ae,e=>t(".h1.w-20",{class:this.passwordScore()>=e.value?e.background:"bg-transparent"}))),t("span.f5.truncate",Ue(this.passwordScore()))])}}class Oe{view({attrs:{field:{label:e="",title:a=e,required:n,uiClass:s={}}}}){return t("div",{class:f(s)},t("label",{title:a,class:m(s)},C(e,n)))}}class Le{constructor(){this.invalid=false;this.selector="input"}onupdate({dom:e,attrs:{field:a,value:n}}){const s=e.querySelector(this.selector);const i=ue(a,n())||(s?!s.checkValidity():false);if(i!==this.invalid){this.invalid=i;t.redraw()}}}class ze{view({attrs:e,children:a}){const{field:n,invalid:s}=e;const{label:i,id:l,type:r="text",required:c,disabled:o,uiClass:u={}}=n;return t("div",{class:r==="hidden"?"clip":f(u,o)},[D(l,u,i,c),t("fieldset.bn",{class:g(u,s)},a)])}}class He{constructor(){this.focus=false;this.focusIn=()=>{this.focus=true};this.focusOut=()=>{this.focus=false};this.wrapperHeight=0}oncreate({dom:e}){this.inputWrapper=e.firstElementChild;this.calcHeight()}onupdate(){this.calcHeight()}calcHeight(){if(this.inputWrapper.clientHeight!==this.wrapperHeight){this.wrapperHeight=this.inputWrapper.clientHeight;t.redraw()}}shouldFloat(e,t){return e==="floatAlways"||t||this.focus}labelTranslateY(){return`calc(${this.wrapperHeight*.5}px - 1.5ex)`}view({attrs:e,children:a}){const{field:n,invalid:s,value:i,xform:r=i}=e;const{label:c,id:o,type:u="text",placeholder:d,required:p,disabled:h,layout:b=l.layoutType,uiClass:v={}}=n;const y=this.shouldFloat(b,d||r());return t("div",{class:`${u==="hidden"?"clip":f(v,h)} ${c?"pt-05rem":""}`,onfocusin:this.focusIn,onfocusout:this.focusOut},t("fieldset.relative.pa0.ma0.flex.w-100",{class:g(v,s)},[c&&this.wrapperHeight?[t("legend.db",{class:`${m(v,p)} hidden h-05ch transition-opts ${y?"maxw-100":"maxw-001px"}`},t("span",{class:"font-07em"},C(c,p))),t(".absolute.top-0",{class:`${m(v,p)} transition-opts`,style:{transform:`translateY(${y?"-1ch":this.labelTranslateY()})`}},t("label.db",{for:o,title:c,class:`transition-opts ${y?"font-07em cursor-default":"font-1em cursor-text"}`},C(c,p)))]:null,a]))}}class Me{constructor(){this.layout=He}view({attrs:e,children:a}){const{field:{layout:n=l.layoutType}}=e;return t(n==="default"?ze:this.layout,e,a)}}class We extends He{shouldFloat(){return true}}class Re extends Me{constructor(){super(...arguments);this.layout=We}}const Ne=new Set(["date","datetime-local","color","range"]);class Be extends Le{view({attrs:e}){const{field:a,value:n,xform:s=n}=e;const{label:i,id:l,type:r="text",name:c=l,title:o=i,placeholder:u,max:d,maxlength:p,min:h,minlength:f,step:m,required:g,readonly:v,disabled:y,autofocus:x,autocomplete:w,pattern:I,inputmode:$,spellcheck:k,instant:S,uiClass:T={}}=a;const C=Ne.has(r)?Re:Me;return t(C,{field:a,value:n,xform:s,invalid:this.invalid},t("input.w-100.bg-transparent.bn.outline-0",{id:l,type:r,name:c,title:o,placeholder:u,max:d,maxlength:p,min:h,minlength:f,step:m,required:g,readonly:v,disabled:y,autofocus:x,autocomplete:w,pattern:I,inputmode:$,spellcheck:k,class:b(T),value:s(),[S?"oninput":"onchange"]:A(n)}))}}class Ve{view({attrs:a}){const{field:n,value:s,xform:i=s}=a;const{label:l,id:r,name:c=r,title:o=l,placeholder:u,max:d,maxlength:p,min:h,minlength:f,step:m,required:g,readonly:v,disabled:y,autofocus:x,autocomplete:w,pattern:I,inputmode:$,spellcheck:k,instant:S,uiClass:T={},options:C}=n;const q=C&&C.length?C[0].value:"$";return t(Re,{field:n,value:s,invalid:ue(n,s())},t(".flex.flex-row.w-100",t("span.mr1.self-center",{class:b(T)},q),t("input.w-100.bg-transparent.bn.outline-0",{id:r,type:"text",name:c,title:o,placeholder:u,max:d,maxlength:p,min:h,minlength:f,step:m,required:g,readonly:v,disabled:y,autofocus:x,autocomplete:w,pattern:I,inputmode:$,spellcheck:k,class:b(T),onfocus:({target:e})=>e.select(),value:e.isUndefined(i())?null:Ye(Ee(i())),[S?"oninput":"onchange"]:Ke(s)})))}}function Ee(t){return e.isString(t)?e.parseInt(t):Number(t)}function je(t){const a=t.replace(/[^\d.]/g,"");let n;let s=0;if(a.indexOf(".")>-1){const t=a.indexOf(".");const i=a.substring(0,t);n=e.parseInt(e.padStart(i,1,"0"));const l=a.substring(t+1,Math.min(t+3,a.length));s=e.parseInt(e.padEnd(l,2,"0"))}else{n=e.parseInt(a)||0}return n*100+s}function Ye(e){const t=_e(e);if(t){return`${t[0]}.${t[1]}`}else{return t}}function _e(t){if(!e.isFinite(t)){return undefined}const a=String(Math.abs(t));let n="0";let s="";if(a.length>2){const e=a.length-2;n=a.substring(0,e);s=a.substring(e)}else{s=e.padStart(a,2,"0")}return[n,s]}function Ke(e){return({target:{value:t}})=>e(je(t))}function Ze(e){switch(e){case"day":return"dd";case"month":return"mm";case"year":return"yyyy"}}function Ge(e,t,a){const n=e.querySelector(`#${t}-${a}`);n.focus()}function Je(e){const t=e?e.toLocaleLowerCase():"";if(t.includes("month")){return"mm"}else if(t.includes("day")){return"dd"}else if(t.includes("year")){return"yy"}else{return null}}function Qe(e,t,a){const n=e.querySelector(`#${t}-${a}`);n.focus();n.select()}function Xe(e){return parseInt(e.getAttribute("maxlength"))}function et(e,t,a,n,s,i,l,r){const c=n.querySelector(`#${e}-${t}`);const o=Xe(c);if((s.key==="Backspace"||s.key==="Delete")&&a.length===0&&r){Qe(n,e,r);s.preventDefault()}else if(i.charCodeAt(0)===s.key.charCodeAt(0)&&l&&a.length!==0&&a.length<o){Qe(n,e,l);s.preventDefault()}}function tt(e,t,a,n,s,i){if(nt(a,n,s)&&e){i(t)}else{i("")}}function at(e){const t=String(e());if(t.length===1&&t!=="0"){e(`0${t}`)}}function nt(e,t,a){const n=!a?2:4;return e.length===n&&t.length===2&&(!a||a.length===2)}function st(e){if(e.includes("month")){return"month"}else if(e.includes("day")){return"day"}return"date"}function it(e,t,a){if(e.invalidExplanation){if(a){return""}else{return`Please check the ${st(e.invalidExplanation)}.`}}else if(!e.year||Number(t)<1900){return"Year must be greater than 1900."}return""}function lt(e,t,a){if(!a){if(!t&&!e){return""}else if(t.length!==2||Number(t)>12){return`Please check the month.`}else if(e.length!==2){return`Please check the year.`}}return""}function rt(e,t){if(t){const a=Je(e);t.querySelectorAll("input").forEach(t=>{if(a&&t.id.substr(-2)===a&&e){t.setCustomValidity(e)}else{t.setCustomValidity("")}})}}function ct(e,t,a,n){const s=t.length===2&&e.length===2&&Number(t)<=12&&Number(t)>0||!e&&!t&&!a;rt(lt(e,t,s),n);return s}function ot(e,t,a,s,i){const l=n.fromObject({year:Number(e),month:Number(t),day:Number(a)});const r=!e&&!t&&!a;rt(it(l,e,r),i);return l.isValid&&Number(e)>=1900||r&&!s}function ut(e,t,a,n,s){const i=n.querySelector(`#${t}-${a}`);const l=e()||"";const r=i.value;const c=/^\d*$/.test(r);if((c||r==="")&&r.length<=4){e(r)}else{e(l)}if(r.length===Xe(i)&&s){Qe(n,t,s)}}class dt{view({attrs:e}){const{id:a}=e.field;return t("input.dn",{id:a})}}class pt{constructor(){this.dom=a();this.valid=a();this.focusedInput=a("mm");this.month=a("");this.year=a("");this.date=a("")}buildDate(e,t){this.date(`${this.month()}/${this.year()}`);const a=ct(this.year(),this.month(),e,this.dom());tt(a,this.date(),this.year(),this.month(),"",t)}oninit({attrs:{value:e,field:t}}){this.valid(!t.required);e.map(e=>{if(e){this.date("");const[t,a]=String(e).split("/");this.month(t);this.year(a)}else if(!this.date()){this.month("");this.year("")}this.valid(ct(this.year(),this.month(),Boolean(t.required),this.dom()))})}oncreate({dom:e}){O(this.dom,e)}onupdate({dom:e}){O(this.dom,e)}onremove(){this.date.end(true);this.year.end(true);this.month.end(true)}view({attrs:a}){const{field:n,value:s}=a;const{id:i,name:l=i,required:r,readonly:c,disabled:o,uiClass:u={}}=n;const d=b(u);return t(Re,{value:s,field:n,invalid:!this.valid()},t(".flex",{onclick:()=>Ge(this.dom(),i,this.focusedInput()),class:"p-1px-2px"},t("span",[t("input.w-100.bg-transparent.bn.outline-0.tc",{id:`${i}-mm`,name:`${l}-mm`,type:"text",placeholder:"MM",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:r,readonly:c,disabled:o,value:this.month(),class:`${d} maxw-mm p-0px`,onfocus:e.partial(this.focusedInput,"mm"),oninput:()=>{ut(this.month,i,"mm",this.dom(),"yy");this.buildDate(Boolean(n.required),a.value)},onkeydown:e=>{et(i,"mm",this.month(),this.dom(),e,"/","yy",undefined)},onblur:()=>{at(this.month);this.buildDate(Boolean(n.required),a.value)}})]),t("span",{class:"p-0px mr-2px"},"/"),t("span",[t("input.w-100.bg-transparent.bn.outline-0.tc",{id:`${i}-yy`,name:`${l}-yy`,type:"text",placeholder:"YY",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:r,readonly:c,disabled:o,value:this.year(),class:`${d} maxw-yy p-0px`,onfocus:e.partial(this.focusedInput,"yy"),onkeydown:e=>{et(i,"yy",this.year(),this.dom(),e,"/",undefined,"mm")},oninput:()=>{ut(this.year,i,"yy",this.dom());this.buildDate(Boolean(n.required),a.value)}}),t(dt,a)])))}}class ht{constructor(){this.dom=a();this.valid=a();this.focusedInput=a(undefined);this.locale=a(undefined);this.literalKey=a("/");this.day=a("");this.month=a("");this.year=a("");this.date=a()}buildDate(e,t=false){this.date(`${this.year()}-${this.month()}-${this.day()}`);const a=ot(this.year(),this.month(),this.day(),t,this.dom());tt(a,this.date(),this.year(),this.month(),this.day(),e)}findNextInput(e){const t=this.dateInputAdvanceOrder.indexOf(e);return t!==this.dateInputAdvanceOrder.length&&Ze(this.dateInputAdvanceOrder[this.dateInputAdvanceOrder.indexOf(e)+1])}findPrevInput(e){const t=this.dateInputAdvanceOrder.indexOf(e);return t!==0&&Ze(this.dateInputAdvanceOrder[this.dateInputAdvanceOrder.indexOf(e)-1])}setDateInputs(t){const a=new Intl.DateTimeFormat(t).formatToParts();this.dateParts=a;const n=a[0].type;this.literalKey(a[1].value);const s=Ze(n);this.focusedInput(s);this.dateInputAdvanceOrder=e(this.dateParts).map(({type:e})=>e).filter(e=>e!=="literal").value()}setLocale(e){const{options:t}=e;const a=t&&t.length?t[0].value:undefined;if(a!==this.locale()){this.locale(a)}}createDateInputs({type:a,value:n},{attrs:{field:{id:s,name:i=s,required:l,readonly:r,disabled:c,uiClass:o={}},value:u}}){const d=b(o);switch(a){case"literal":return t("span",{class:"p-0px mr-2px"},n);case"day":return t("span",t("input.w-100.bg-transparent.bn.outline-0.tc",{id:`${s}-dd`,name:`${i}-dd`,type:"text",placeholder:"DD",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:l,readonly:r,disabled:c,value:this.day(),class:`${d} maxw-dd p-0px`,onfocus:e.partial(this.focusedInput,"dd"),onkeydown:e=>{et(s,"dd",this.day(),this.dom(),e,this.literalKey(),this.findNextInput("day"),this.findPrevInput("day"))},oninput:()=>{ut(this.day,s,"dd",this.dom(),this.findNextInput("day"));this.buildDate(u,l)},onblur:()=>{at(this.day);this.buildDate(u,l)}}));case"month":return t("span",t("input.w-100.bg-transparent.bn.outline-0.tc",{id:`${s}-mm`,name:`${i}-mm`,type:"text",placeholder:"MM",minlength:"2",maxlength:"2",pattern:"[0-9]*",inputmode:"numeric",required:l,readonly:r,disabled:c,value:this.month(),class:`${d} maxw-mm p-0px`,onkeydown:e=>{et(s,"mm",this.month(),this.dom(),e,this.literalKey(),this.findNextInput("month"),this.findPrevInput("month"))},oninput:()=>{ut(this.month,s,"mm",this.dom(),this.findNextInput("month"));this.buildDate(u,l)},onfocus:e.partial(this.focusedInput,"mm"),onblur:()=>{at(this.month);this.buildDate(u,l)}}));case"year":return t("span",t("input.w-100.bg-transparent.bn.outline-0.tc",{id:`${s}-yyyy`,name:`${i}-yyyy`,type:"text",placeholder:"YYYY",minlength:"4",maxlength:"4",pattern:"[0-9]*",inputmode:"numeric",required:l,readonly:r,disabled:c,value:this.year(),class:`${d} maxw-yyyy p-0px`,onfocus:e.partial(this.focusedInput,"yyyy"),onkeydown:e=>{et(s,"yyyy",this.year(),this.dom(),e,this.literalKey(),this.findNextInput("year"),this.findPrevInput("year"))},oninput:()=>{ut(this.year,s,"yyyy",this.dom(),this.findNextInput("year"));this.buildDate(u,l)}}))}}oninit({attrs:{value:t,field:a}}){this.valid(!a.required);t.map(t=>{if(t){const a=new Date(String(t));this.date("");const n=e.padStart(String(a.getDate()),2,"0");const s=e.padStart(String(1+a.getMonth()),2,"0");const i=String(a.getFullYear());this.day(n);this.month(s);this.year(i)}else if(!this.date()){this.day("");this.month("");this.year("")}this.valid(ot(this.year(),this.month(),this.day(),Boolean(a.required),this.dom()))});this.locale.map(e=>{this.setDateInputs(e)});this.setLocale(a)}oncreate({dom:e}){O(this.dom,e)}onbeforeupdate({attrs:{field:e}}){this.setLocale(e)}onupdate({dom:e}){O(this.dom,e)}onremove(){this.date.end(true);this.year.end(true);this.month.end(true);this.day.end(true)}view(e){const{attrs:{field:a,value:n}}=e;const{id:s}=a;return t(Re,{value:n,field:a,invalid:!this.valid()},t(".flex",{onclick:()=>Ge(this.dom(),s,this.focusedInput()),class:"p-1px-2px"},this.dateParts.map(t=>this.createDateInputs(t,e)),t(dt,e.attrs)))}}class ft{constructor(){this.showPassword=a(false)}view({attrs:e}){const{field:a,value:n}=e;const{label:s,id:i,name:r=i,title:c=s,placeholder:o,maxlength:u,minlength:d,required:p,readonly:h,disabled:f,autofocus:m,autocomplete:g,pattern:v,inputmode:y,instant:x,uiClass:w={}}=a;return t(Me,{field:a,value:n,invalid:ue(a,n())},t(".flex.flex-row.w-100",[t("input.w-100.bg-transparent.bn.outline-0",{id:i,name:r,title:c,placeholder:o,type:this.showPassword()?"text":"password",maxlength:u,minlength:d,required:p,readonly:h,disabled:f,autofocus:m,autocomplete:g,pattern:v,inputmode:y,class:b(w),value:n(),autocorrect:"off",[x?"oninput":"onchange"]:A(n)}),t("i.ml1.pa1.fa-fw.pointer.dim",{title:l.showPassTxt,class:this.showPassword()?l.hidePassIcn:l.showPassIcn,onclick:()=>this.showPassword(!this.showPassword())})]))}}class mt extends He{labelTranslateY(){return"0.5ex"}}class gt extends Me{constructor(){super(...arguments);this.layout=mt}}class bt extends Le{constructor(){super(...arguments);this.selector="textarea"}view({attrs:e}){const{field:a,value:n,xform:s=n}=e;const{label:i,id:l,name:r=l,title:c=i,placeholder:o,required:u,readonly:d,disabled:p,autofocus:h,autocomplete:f,spellcheck:m,instant:g,uiClass:b={}}=e.field;return t(gt,{field:a,value:n,xform:s,invalid:this.invalid},t("textarea.w-100.bg-transparent.bn.outline-0.h-100",{id:l,name:r,title:c,placeholder:o,required:u,readonly:d,disabled:p,autofocus:h,autocomplete:f,spellcheck:m,class:`${y(b)} resize-none`,value:n(),[g?"oninput":"onchange"]:A(n)}))}}class vt{constructor(){this.onIcon="checkIcn";this.offIcon="uncheckIcn"}view({attrs:{field:e,value:a}}){const{label:n="",id:s,name:i=s,title:r=n,required:c,readonly:o,disabled:u,autocomplete:d,uiClass:p={}}=e;return t("div",{class:f(p,u)},t("fieldset.w-100.bn",{class:g(p)},[t("label.flex.items-center",{title:r,class:v(p,u,o),"data-input-id":s},t("input.clip[type=checkbox]",{id:s,name:i,checked:a(),required:c,autocomplete:d,disabled:u||o,onchange:F(a)}),t("i.mr2",{class:l[a()?this.onIcon:this.offIcon]}),C(n,c),t(re,{field:e,value:a}))]))}}class yt extends vt{constructor(){super(...arguments);this.onIcon="toggleOnIcn";this.offIcon="toggleOffIcn"}}class xt{view({attrs:a}){const{field:n,value:s}=a;const{id:i,name:l=i,required:r,readonly:c,disabled:o,autocomplete:u,uiClass:d={},options:p}=n;return t(Re,{field:n,value:s,invalid:ue(n,s())},t(".w-100.flex.justify-center",{onchange:A(s),class:"p-1px-2px"},e.map(p,({value:e,label:a=e,icon:n})=>{const p=s()===e;return t("label.dib",{title:a,class:x(d,p,o,c),"data-input-id":i},t("input.clip[type=radio]",{name:l,value:e,checked:p,required:r,autocomplete:u,disabled:o||c}),n?t("i.fa-fw",{class:n}):a)})))}}class wt{view({attrs:a}){const{field:n,value:s}=a;const{label:i,id:l,name:r=l,title:c=i,required:o,readonly:u,disabled:d,autofocus:p,autocomplete:h,uiClass:f={},placeholder:m="--- Select one ---",options:g}=n;return t(Re,{field:n,value:s,invalid:ue(n,s())},t("select.w-100.bg-transparent.bn.outline-0",{id:l,name:r,title:c,required:o,readonly:u,disabled:d,autofocus:p,autocomplete:h,class:b(f),value:s()?s():"",onchange:A(s)},t("option",{disabled:true,value:""},m),e.map(g,({value:e,label:a=e})=>t("option",{value:e,disabled:d||u},a))))}}class It{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n,displayType:s}}){const i=e.head(n());const{disabled:r,uiClass:c={}}=a;const o=s==="none"||!i?l.addFileTxt:i.name;return t("div",{class:f(c,r)},t(ve,{field:a,multiple:false,dragging:this.dragging,onSet:ye(n,true),value:n},t(".flex.items-center.pa1",{class:I(c,this.dragging(),he(a,n()))},[t("i.pa1",{class:l.uploadIcn}),t("span.ma1.flex-auto",o),i&&s!=="none"?[t($e,i),t("i.pa1.pointer.dim",{title:`Remove ${i.name}`,class:l.cancelIcn,onclick:xe(n,i.guid)})]:null])))}}function $t(a,n,s=false){return i=>{const l=s?[]:a();return Promise.all(e.map(i,e=>Y(e,n,e.type).then(t=>{const a=H(z(t),e.name);l.push({guid:S(),name:a.name,path:"not_set",file:a,dataUrl:t})}))).then(()=>{a(l);t.redraw()})}}class kt{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n}}){const{disabled:s,uiClass:i={}}=a;return t("div",{class:f(i,s)},[t(ve,{field:a,defaultAccept:"image/*",dragging:this.dragging,onSet:$t(n,l.imageMaxSize),value:n},t(".w-100.pa1.dt.tc",{class:I(i,this.dragging(),he(a,n()))},t("i.fa-2x.dtc.v-mid",{class:l.cameraIcn}))),t(".flex.flex-row.flex-wrap.mt1.nr1.nb1.nl1.thumb-max-size",e.map(n(),e=>t(Ie,{src:q(e.path,e.dataUrl)},t(".absolute.top-0.right-0.child",t(J,{title:`Remove ${e.name}`,icon:l.deleteIcn,onclick:xe(n,e.guid)})))))])}}class St{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n}}){const s=e.head(n());const{disabled:i,uiClass:r={}}=a;return t("div",{class:f(r,i)},t(ve,{field:a,defaultAccept:"image/*",multiple:false,dragging:this.dragging,onSet:$t(n,l.imageMaxSize,true),value:n},t(".pa1",{class:I(r,this.dragging(),he(a,n()))},t(".relative.w-100.dt.tc",s?[t("img.img.contain.img-max-size",{title:s.name,src:q(s.path,s.dataUrl)}),t(".absolute.top-0.right-0.pa1.pointer.dim",{title:`Remove ${s.name}`,onclick:xe(n,s.guid)},t("i.pa1",{class:l.cancelIcn}))]:t("i.fa-2x.dtc.v-mid",{class:l.cameraIcn})))))}}class Tt{oncreate({dom:t}){const a=t.children[0];const n=T();this.signaturePad=new s(a,{minWidth:.5*n,maxWidth:1.5*n});const i=()=>{const e=T();a.width=a.offsetWidth*e;a.height=a.offsetHeight*e;const t=a.getContext("2d");t.scale(e,e);this.resetCanvas()};this.resizeHandler=e.debounce(i,250);window.addEventListener("resize",this.resizeHandler);window.addEventListener("orientationchange",this.resizeHandler);i()}onremove(){this.resizeHandler.cancel();window.removeEventListener("resize",this.resizeHandler);window.removeEventListener("orientationchange",this.resizeHandler)}view({attrs:{style:e,onSet:a,onCancel:n}}){return[t(".aspect-ratio.bg-white.ba.bw1.br3.b--dashed.b--black-30",{style:e},t("canvas.aspect-ratio--object")),t(".absolute.top-0.right-0.z-999",{class:"tr-y--100"},[t(J,{title:l.applyTtl,icon:l.applyIcn,classes:"ma1",onclick:()=>{if(!this.signaturePad.isEmpty()){a(this.signaturePad.toDataURL("image/png"))}}}),t(J,{title:l.resetTtl,icon:l.resetIcn,classes:"ma1",onclick:()=>this.resetCanvas()}),t(J,{title:l.cancelTtl,icon:l.cancelIcn,classes:"ma1",onclick:n})])]}resetCanvas(){this.signaturePad.clear()}}function Ct(e,t,a){return()=>{if(e()){a(Z(e(),t),{text:e(),heightPct:t})}return false}}class qt{constructor(){this.text=a("")}oncreate({dom:e}){const t=e.children[0];t.focus({preventScroll:false});this.scaleText(e)}onupdate({dom:e}){this.scaleText(e)}view({attrs:{heightPct:e,style:a,onSet:n,onCancel:s}}){return[t("form.aspect-ratio.ba.bw1.br3.b--dashed.b--black-30",{style:a,onsubmit:Ct(this.text,e,n)},t("input.aspect-ratio--object.pa2.ba.bw0[type=text]",{oninput:A(this.text),value:this.text(),class:"sign-font"})),t(".absolute.top-0.right-0.z-999",{class:"tr-y--100"},[t(J,{title:l.applyTtl,icon:l.applyIcn,classes:"ma1",onclick:Ct(this.text,e,n)}),t(J,{title:l.resetTtl,icon:l.resetIcn,classes:"ma1",onclick:()=>this.text("")}),t(J,{title:l.cancelTtl,icon:l.cancelIcn,classes:"ma1",onclick:s})])]}scaleText(e){const t=e.clientHeight;e.style.fontSize=`${.56*t}px`}}function Pt(e,t,a){return()=>a(Z(t,e),{text:t,heightPct:e})}class Dt{view({attrs:{heightPct:e,stampTxt:a,stampSetTxt:n,onSet:s}}){return[t("span.clip",{class:"sign-font"},n),t(".flex",t(J,{label:a,classes:`flex-auto ${l.stampBtnClass}`,context:l.stampBtnContext,onclick:Pt(e,n,s)}))]}}const Ut={["draw"]:Tt,["type"]:qt,["stamp"]:Dt};function At(e,a,n){return(s,i)=>_(s,n).then(n=>{e([M(n,`sign-${a}.png`,i)]);t.redraw()})}class Ft{oninit({attrs:{value:e}}){this.valUpdate=e.map(()=>this.setSignType())}onremove(){this.valUpdate.end()}view({attrs:{field:a,value:n}}){const{label:s,id:i,readonly:r,disabled:c,uiClass:u={},options:d=l.signOpts,heightPct:p=l.signHeightPct,stampTxt:h=l.stampTxt,stampSetTxt:m=l.stampSetTxt}=a;const g={paddingBottom:`${p}%`};const b=e.head(n());const v=e(d).map(({value:e})=>{if(e==="draw"){return{type:e,icon:l.drawIcn,label:l.signDrawTxt}}else if(e==="type"){return{type:e,icon:l.typeIcn,label:l.signTypeTxt}}else if(e==="stamp"){return{type:e,icon:l.stampIcn,label:l.signStampTxt}}return null}).compact().value();if(v.length===1&&!b){this.setSignType(v[0].type)}return t("div.relative",{class:f(u,c)},[D(i,u,s),r||c?t(".aspect-ratio",{id:i,style:g},b?t(".aspect-ratio--object",{class:"pe-none"},t("img.img.w-100.absolute",{src:q(b.path,b.dataUrl)})):null):this.signType?t(Ut[this.signType],{heightPct:p,stampTxt:h,stampSetTxt:m,style:g,onSet:At(n,i,l.signMaxSize),onCancel:e.bind(this.setSignType,this,undefined)}):t(".aspect-ratio.pointer",{id:i,class:o.fileInputWrapper,style:g},b?t(".aspect-ratio--object.hide-child.dim",{onclick:e.bind(n,this,[])},[t("img.img.w-100.absolute",{src:q(b.path,b.dataUrl)}),t(".pa3.absolute.top-0.right-0.child",t("i.fa-2x",{class:l.resetIcn}))]):t(".aspect-ratio--object.flex",e.map(v,({type:a,icon:n,label:s})=>t(".flex-auto.flex.items-center.justify-center.dim",{title:s,onclick:e.bind(this.setSignType,this,a)},t("i.fa-2x.ma1",{class:n}),t("span.ma1.dn.db-ns.truncate",s)))))])}setSignType(e){this.signType=e}}function Ot(a,n){return s=>{const i=n?[]:a();return Promise.all(e.map(s,e=>{if(R(e.type)){return Y(e,l.imageMaxSize,e.type).then(t=>{const a=H(z(t),e.name);i.push({guid:S(),name:a.name,path:"not_set",file:a,dataUrl:t})})}else{i.push({guid:S(),name:e.name,path:"not_set",file:e});return Promise.resolve()}})).then(()=>{a(i);t.redraw()})}}class Lt{constructor(){this.dragging=a(false)}view({attrs:{field:a,value:n}}){const s=e.head(n());const{disabled:i,uiClass:r={}}=a;return t("div",{class:f(r,i)},t(ve,{field:a,defaultAccept:"*",multiple:false,dragging:this.dragging,onSet:Ot(n,true),value:n},t(".flex.items-center.pa1",{class:I(r,this.dragging(),he(a,n()))},s?s.dataUrl?[t(".relative.w-100.dt.tc",t("img.img.contain.img-max-size",{title:s.name,src:q(s.path,s.dataUrl)}),t(".absolute.top-0.right-0.pa1.pointer.dim",{title:`Remove ${s.name}`,onclick:xe(n,s.guid)},t("i.pa1",{class:l.cancelIcn})))]:[t($e,s),t("span.ma1.flex-auto",{title:s.name},s.name),t("i.pa1.pointer.dim",{title:`Remove ${s.name}`,class:l.cancelIcn,onclick:xe(n,s.guid)})]:[t("i.pa1",{class:l.uploadIcn}),t("span.ma1.flex-auto",l.addFileTxt)])))}}class zt{constructor(){this.dragging=a(false)}view({attrs:{field:e,value:a,displayType:n,showDisplay:s=true}}){const{disabled:i,uiClass:r={}}=e;return t("div",{class:f(r,i)},[t(ve,{field:e,defaultAccept:"*",dragging:this.dragging,onSet:Ot(a,false),value:a},t(".flex.items-center.pa1.dt",{class:I(r,this.dragging(),he(e,a()))},[t("i.pa1",{class:l.uploadIcn}),t("span.ma1.flex-auto",l.addFileTxt)])),s?t(ke,{displayType:n,value:a}):null])}}class Ht extends ve{constructor(){super(...arguments);this.showLabel=false}}class Mt{constructor(){this.dragging=a(false)}view({attrs:{field:e,value:a}}){const{label:n="Add File",required:s,uiClass:i={}}=e;return[n?t("span.db.mb1",{class:m(i,s)},C(n,s)):null,t("div",{class:`${I(i,this.dragging(),he(e,a()))} ${h()} ${o.button}`},t(Ht,{field:e,multiple:false,dragging:this.dragging,onSet:ye(a,true),value:a},t(".flex.items-center",U(l.uploadIcn,n))))]}}export{G as Badge,Be as BaseInput,ae as BaseText,J as Button,Q as ButtonLink,pt as CardDateInput,ce as Checkbox,vt as CheckboxInput,Ve as CurrencyInput,ht as DateInput,ne as DateText,ke as DisplayTypeComponent,Mt as FileButtonSelect,Te as FileList,we as FileMulti,It as FileSelect,Ce as ImageList,kt as ImageMulti,qe as ImagePreview,St as ImageSelect,Oe as Label,le as Link,zt as MultiOmniFileInput,X as NavButton,ee as NavLink,Lt as OmniFileInput,ft as PasswordInput,Fe as PasswordStrength,xt as RadioInput,wt as SelectInput,Se as SelectText,Ft as SignBuilder,bt as TextareaInput,oe as Toggle,yt as ToggleInput,te as Trusted,Z as createStamp,je as currencyStrToNumber,z as dataURItoBlob,M as dataUrlToFile,H as fileConstructor,L as fileNameExtSplit,N as getOrientation,S as guid,ie as iconMap,se as linkAttrs,Ye as numberToCurrencyStr,_e as numberToCurrencyTuple,T as pxRatio,B as readArrayBuffer,V as readOrientation,Y as resizeImage,_ as scaleDataUrl,j as scaleRect,K as textToImage,o as theme,p as updateButtonContext,u as updateClasses,r as updateConfig};
